(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{414:function(s,t,a){"use strict";a.r(t);var n=a(2),e=Object(n.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h2",{attrs:{id:"_1-å‰è¨€"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-å‰è¨€"}},[s._v("#")]),s._v(" 1. å‰è¨€")]),s._v(" "),t("p",[s._v("ç¬¬ä¸‰ç¯‡ä¸»è¦å°±æ˜¯å°±æ˜¯è¯´ä¸‹"),t("code",[s._v("webpack")]),s._v("çš„ä¸€äº›æ¦‚å¿µå®šä¹‰ï¼ŒåŸºæœ¬ä¸Šå°±æ˜¯è‡ªå·±ä¹‹å‰æœçš„è®²çš„å¥½çš„ä¸€äº›æ–‡ç« çš„æ€»ç»“ï¼Œå¸Œæœ›èƒ½å¤Ÿå¸®åŠ©æ›´äº†è§£"),t("code",[s._v("webpack")]),s._v("çš„è¿è¡ŒåŸç†")]),s._v(" "),t("h2",{attrs:{id:"_2-module-chunk-bundle"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-module-chunk-bundle"}},[s._v("#")]),s._v(" 2. module chunk bundle")]),s._v(" "),t("ul",[t("li",[s._v("module: moduleæ˜¯ç¦»æ•£åŠŸèƒ½å—ï¼Œç›¸æ¯”äºå®Œæ•´ç¨‹åºæä¾›äº†æ›´å°çš„æ¥è§¦é¢ã€‚ç²¾å¿ƒç¼–å†™çš„æ¨¡å—æä¾›äº†å¯é çš„æŠ½è±¡å’Œå°è£…ç•Œé™ï¼Œä½¿å¾—åº”ç”¨ç¨‹åºä¸­æ¯ä¸ªæ¨¡å—éƒ½å…·æœ‰æ¡ç†æ¸…æ¥šçš„è®¾è®¡å’Œæ˜ç¡®çš„ç›®çš„ã€‚")]),s._v(" "),t("li",[s._v("chunk: "),t("code",[s._v("webpack")]),s._v(" ç‰¹å®šæœ¯è¯­åœ¨å†…éƒ¨ç”¨äºç®¡ç†æ†ç»‘è¿‡ç¨‹ã€‚è¾“å‡ºæŸï¼ˆbundleï¼‰ç”± chunk ç»„æˆï¼Œå…¶ä¸­æœ‰å‡ ç§ç±»å‹ï¼ˆä¾‹å¦‚ entry å’Œ child ï¼‰ã€‚é€šå¸¸ï¼Œchunk ç›´æ¥ä¸ bundle ç›¸å¯¹åº”ï¼Œä½†æ˜¯æœ‰äº›é…ç½®ä¸ä¼šäº§ç”Ÿä¸€å¯¹ä¸€çš„å…³ç³»ã€‚")]),s._v(" "),t("li",[s._v("bundle:ç”±è®¸å¤šä¸åŒçš„æ¨¡å—ç”Ÿæˆï¼ŒåŒ…å«å·²ç»ç»è¿‡åŠ è½½å’Œç¼–è¯‘è¿‡ç¨‹çš„æºæ–‡ä»¶çš„æœ€ç»ˆç‰ˆæœ¬ã€‚")])]),s._v(" "),t("p",[s._v("åœ¨æ¨¡å—åŒ–ç¼–ç¨‹ä¸­ï¼Œå¯¹äº"),t("strong",[s._v("module(æ¨¡å—)"),t("strong",[s._v("å¹¿ä¹‰çš„è®¤çŸ¥æ˜¯æ‰€æœ‰é€šè¿‡"),t("code",[s._v("import/require")]),s._v("ç­‰æ–¹å¼å¼•å…¥çš„ä»£ç ("),t("em",[s._v(".mjsã€")]),s._v(".jsæ–‡ä»¶)ã€‚è€Œåœ¨ä¸‡ç‰©çš†æ¨¡å—çš„ webpackï¼Œé¡¹ç›®ä¸­")]),s._v("ä½¿ç”¨")]),s._v("çš„ä»»ä½•ä¸€ä¸ªèµ„æº(å¦‚cssã€å›¾ç‰‡)ä¹Ÿéƒ½è¢«è§†ä½œæ¨¡å—æ¥å¤„ç†ã€‚åœ¨ webpack çš„ç¼–è¯‘è¿‡ç¨‹ä¸­ï¼Œmodule çš„è§’è‰²æ˜¯"),t("strong",[s._v("èµ„æºçš„æ˜ å°„å¯¹è±¡ï¼Œå‚¨å­˜äº†å½“å‰æ–‡ä»¶æ‰€æœ‰ä¿¡æ¯")]),s._v("ï¼ŒåŒ…å«èµ„æºçš„è·¯å¾„ã€ä¸Šä¸‹æ–‡ã€ä¾èµ–ã€å†…å®¹ç­‰ã€‚\nåŸå§‹çš„èµ„æºæ¨¡å—ä»¥ Module å¯¹è±¡å½¢å¼å­˜åœ¨ã€æµè½¬ã€è§£æå¤„ç†ã€‚")]),s._v(" "),t("p",[t("strong",[s._v("chunk(ä»£ç å—)"),t("strong",[s._v("æ˜¯ä¸€äº›æ¨¡å— (module) çš„å°è£…å•å…ƒã€‚äº webpack è¿è¡Œæ—¶çš„ "),t("strong",[s._v("seal")]),s._v(" å°åŒ…é˜¶æ®µç”Ÿæˆï¼Œä¸”ç›´åˆ°èµ„æºæ„å»ºé˜¶æ®µéƒ½ä¼š")]),s._v("æŒç»­å‘ç”Ÿå˜åŒ–")]),s._v("çš„ä»£ç å—ï¼Œåœ¨æ­¤æœŸé—´æ’ä»¶é€šè¿‡å„ç§"),t("a",{attrs:{href:"https://www.jianshu.com/p/fb3a8182838c",target:"_blank",rel:"noopener noreferrer"}},[s._v("é’©å­äº‹ä»¶"),t("OutboundLink")],1),s._v("ä¾µå…¥å„ä¸ªç¼–è¯‘é˜¶æ®µå¯¹ chunk è¿›è¡Œä¼˜åŒ–å¤„ç†ã€‚\n"),t("code",[s._v("webpack")]),s._v(" åœ¨ "),t("strong",[s._v("make")]),s._v(" é˜¶æ®µè§£ææ‰€æœ‰æ¨¡å—èµ„æºï¼Œæ„å»ºå‡ºå®Œæ•´çš„ "),t("a",{attrs:{href:"https://links.jianshu.com/go?to=https%3A%2F%2Fzhuanlan.zhihu.com%2Fp%2F369953304",target:"_blank",rel:"noopener noreferrer"}},[s._v("Dependency Graph"),t("OutboundLink")],1),s._v(" (ä» Entry å…¥å£èµ·ç‚¹å¼€å§‹é€’å½’æ”¶é›†æ‰€æœ‰æ¨¡å—ä¹‹é—´çš„ä¾èµ–å…³ç³»)ã€‚ç„¶ååœ¨ "),t("strong",[s._v("seal")]),s._v(" é˜¶æ®µä¼šæ ¹æ®é…ç½®åŠæ¨¡å—ä¾èµ–å›¾å†…å®¹æ„å»ºå‡ºä¸€ä¸ªæˆ–å¤šä¸ª chunk å®ä¾‹ï¼Œå†ç”± "),t("a",{attrs:{href:"https://links.jianshu.com/go?to=https%3A%2F%2Fwebpack.docschina.org%2Fplugins%2Fsplit-chunks-plugin%2F",target:"_blank",rel:"noopener noreferrer"}},[s._v("SplitChunksPlugin"),t("OutboundLink")],1),s._v(" æ’ä»¶æ ¹æ®è§„åˆ™ä¸ "),t("code",[s._v("ChunkGraph")]),s._v(" å¯¹ "),t("code",[s._v("Chunk")]),s._v(" åšä¸€ç³»åˆ—çš„å˜åŒ–ã€æ‹†è§£ã€åˆå¹¶æ“ä½œï¼Œé‡æ–°ç»„ç»‡æˆä¸€æ‰¹æ€§èƒ½æ›´é«˜çš„ Chunksã€‚åç»­å†ä¸ºå®ƒä»¬åšæ’åºå’Œç”Ÿæˆhashç­‰ä¸€ç³»åˆ—ä¼˜åŒ–å¤„ç†ï¼Œç›´åˆ° Compiler.compile æ‰§è¡Œå®Œæˆä½œä¸ºèµ„æºè¾“å‡º("),t("strong",[s._v("emitAssets")]),s._v(")ã€‚")]),s._v(" "),t("p",[t("strong",[s._v("bundle(åŒ…)")]),s._v(" æ˜¯ "),t("code",[s._v("webpack")]),s._v(" è¿›ç¨‹æ‰§è¡Œå®Œæ¯•åè¾“å‡ºçš„"),t("strong",[s._v("æœ€ç»ˆç»“æœ")]),s._v("ï¼Œæ˜¯å¯¹ chunk è¿›è¡Œç¼–è¯‘å‹ç¼©æ‰“åŒ…ç­‰å¤„ç†åçš„äº§å‡ºã€‚é€šå¸¸ä¸æ„å»ºå®Œæˆçš„ chunk ä¸ºä¸€å¯¹ä¸€çš„å…³ç³»ã€‚å½“ç„¶å­˜åœ¨ä¾‹å¤–æƒ…å†µ")]),s._v(" "),t("ol",[t("li",[s._v("è®¾ç½®sourceMapï¼ˆdevTool: 'source-map')")])]),s._v(" "),t("div",{staticClass:"language-javascript line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-javascript"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" path "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("require")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'path'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\nmodule"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("exports "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("entry")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("app")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" path"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("resolve")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("__dirname"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'src/index.js'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  \n  "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("mode")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'development'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("output")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("path")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" path"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("resolve")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("__dirname"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'dist'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("filename")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'[name].[contenthash: 6].js'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("chunkFilename")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'[name].[contenthash:8].js'")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// chunkFilename æŒ‡æœªè¢«åˆ—åœ¨ entry ä¸­ï¼Œå´åˆéœ€è¦è¢«æ‰“åŒ…å‡ºæ¥çš„ chunk æ–‡ä»¶çš„åç§°ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œè¿™ä¸ª chunk æ–‡ä»¶æŒ‡çš„å°±æ˜¯è¦æ‡’åŠ è½½çš„ä»£ç ã€‚")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br")])]),t("p",[s._v("å¯ä»¥çœ‹å‡ºåŒä¸€ä¸ªchunkäº§ç”Ÿäº†ä¸¤ä¸ªbundleï¼Œapp.jså’Œå®ƒå¯¹åº”çš„app.js.map")]),s._v(" "),t("ol",[t("li",[t("a",{attrs:{href:"https://links.jianshu.com/go?to=https%3A%2F%2Fwebpack.docschina.org%2Fplugins%2Fmini-css-extract-plugin%2F",target:"_blank",rel:"noopener noreferrer"}},[s._v("MiniCssExtractPlugin"),t("OutboundLink")],1),s._v(" åœ¨ seal çš„èµ„æºç”Ÿæˆé˜¶æ®µ - chunk è·å– Manifest æ¸…å•æ–‡ä»¶çš„æ—¶å€™æŠ½ç¦»å‡º CssModule åˆ°å•ç‹¬çš„æ–‡ä»¶ï¼Œè¿™æ—¶ chunk å…³è”çš„cssä¹Ÿç®—ä¸€ä¸ª bundle äº†ã€‚")])]),s._v(" "),t("p",[s._v("é¡ºä¾¿è¯´æ˜ä¸‹ä¸Šé¢çš„"),t("strong",[s._v("output.filename")]),s._v("å’Œ"),t("strong",[s._v("output.chunkFilename")]),s._v("ï¼š")]),s._v(" "),t("ul",[t("li",[s._v("filename æ˜¯ç»™æ¯ä¸ªè¾“å‡ºçš„ bundle å‘½åçš„(æœ€ç»ˆçš„ chunk)ï¼Œ[name]å–å€¼ä¸º chunk çš„åç§°ã€‚å…¥å£ chunk çš„[name]æ˜¯ "),t("a",{attrs:{href:"https://links.jianshu.com/go?to=https%3A%2F%2Fwebpack.docschina.org%2Fconfiguration%2Fentry-context%2F%23naming",target:"_blank",rel:"noopener noreferrer"}},[s._v("entry"),t("OutboundLink")],1),s._v(" é…ç½®çš„å…¥å£å¯¹è±¡çš„ keyï¼Œå¦‚ä¸Šé¢çš„app (ä½†åªæœ‰å½“ç»™ entry ä¼ é€’å¯¹è±¡æ‰æˆç«‹ï¼Œå¦åˆ™éƒ½æ˜¯é»˜è®¤çš„main)ã€‚runtime chunk åˆ™æ˜¯"),t("a",{attrs:{href:"https://links.jianshu.com/go?to=https%3A%2F%2Fwebpack.docschina.org%2Fconfiguration%2Foptimization%2F%23optimizationruntimechunk",target:"_blank",rel:"noopener noreferrer"}},[s._v("optimization.runtimeChunk"),t("OutboundLink")],1),s._v(" é…ç½®çš„åå­—ã€‚")]),s._v(" "),t("li",[s._v("å¦‚æœé…ç½®äº†"),t("code",[s._v("chunkFilename")]),s._v("ï¼Œåˆ™"),t("strong",[s._v("é™¤äº†åŒ…å«è¿è¡Œæ—¶ä»£ç çš„é‚£ä¸ª bundleï¼Œå…¶ä½™ bundle çš„å‘½åéƒ½åº”ç”¨chunkFilename")]),s._v("\nå¦‚å•ç‹¬æŠ½å‡º "),t("code",[s._v("runtime chunk")]),s._v("ï¼Œé‚£ä¹ˆ runtime åº”ç”¨ "),t("code",[s._v("output.filename")]),s._v("ï¼Œå…¶ä½™éƒ½åº”ç”¨"),t("code",[s._v("output.chunkFilename")]),s._v("ï¼›å¦åˆ™å°±æ˜¯åŒ…å«å…¥å£æ¨¡å—çš„ chunk åº”ç”¨ "),t("code",[s._v("output.filename")]),s._v("ï¼Œå…¶ä½™ç”¨"),t("code",[s._v("output.chunkFilename")]),s._v("ã€‚")])]),s._v(" "),t("h2",{attrs:{id:"_3-webpackæ„å»ºçš„å¤§è‡´æµç¨‹"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-webpackæ„å»ºçš„å¤§è‡´æµç¨‹"}},[s._v("#")]),s._v(" 3. webpackæ„å»ºçš„å¤§è‡´æµç¨‹")]),s._v(" "),t("ul",[t("li",[s._v("åˆå§‹åŒ–å‚æ•°é˜¶æ®µï¼šç”¨æˆ·å‘½ä»¤è¡Œè¾“å…¥å‚æ•°/é…ç½®çš„è„šæœ¬å‚æ•°ï¼Œè·å–æœ€ç»ˆçš„é…ç½®")]),s._v(" "),t("li",[s._v("å¼€å§‹ç¼–è¯‘ï¼šåˆå§‹åŒ–é˜¶æ®µè·å–çš„é…ç½®åˆå§‹åŒ–å¾—åˆ°ä¸€ä¸ª"),t("code",[s._v("compiler")]),s._v("å¯¹è±¡ï¼Œæ³¨å†Œæ‰€æœ‰çš„æ’ä»¶"),t("code",[s._v("plugins")]),s._v("ï¼Œæ’ä»¶å¼€å§‹ç›‘å¬"),t("code",[s._v("webpack")]),s._v("æ„å»ºè¿‡ç¨‹çš„ç”Ÿå‘½å‘¨æœŸçš„ç¯èŠ‚ï¼ˆäº‹ä»¶ï¼‰ï¼Œä¸åŒçš„ç¯èŠ‚ä¼šæœ‰ç›¸åº”çš„å¤„ç†ï¼Œç„¶åå¼€å§‹æ‰§è¡Œç¼–è¯‘")]),s._v(" "),t("li",[s._v("ç¡®å®šå…¥å£ï¼šæ ¹æ®é…ç½®çš„"),t("code",[s._v("entry")]),s._v("å…¥å£ï¼Œå¼€å§‹è§£ææ–‡ä»¶æ„å»º"),t("code",[s._v("AST")]),s._v("è¯­æ³•æ•°ï¼Œæ‰¾å‡ºä¾èµ–ï¼Œé€’å½’ä¸‹å»")]),s._v(" "),t("li",[s._v("ç¼–è¯‘æ¨¡æ¿ï¼šé€’å½’è¿‡ç¨‹ä¸­ï¼Œæ ¹æ®æ–‡ä»¶ç±»å‹å’Œ"),t("code",[s._v("loader")]),s._v("é…ç½®ï¼Œè°ƒç”¨ç›¸åº”çš„"),t("code",[s._v("loader")]),s._v("å¯¹ä¸åŒçš„æ–‡ä»¶åšä¸åŒçš„è½¬æ¢å¤„ç†ï¼Œæ‰¾å‡ºè¯¥æ¨¡å—ä¾èµ–çš„æ¨¡å—ï¼Œç„¶åé€’å½’ä¸‹å»ï¼Œç›´è‡³é¡¹ç›®ä¸­ä¾èµ–çš„æ‰€æœ‰æ¨¡å—ç»è¿‡äº†ç¼–è¯‘å¤„ç†")]),s._v(" "),t("li",[s._v("ç¼–è¯‘è¿‡ç¨‹ä¸­ï¼Œæœ‰ä¸€ç³»åˆ—çš„æ’ä»¶ä¼šåœ¨ä¸åŒçš„ç¯èŠ‚åšç›¸åº”çš„äº‹æƒ…ï¼Œå¦‚ï¼š"),t("code",[s._v("UglifyPlugin")]),s._v("ä¼šåœ¨ "),t("code",[s._v("loader")]),s._v(" è½¬æ¢é€’å½’å®Œå¯¹ç»“æœä½¿ç”¨ "),t("code",[s._v("UglifyJs")]),s._v(" å‹ç¼©è¦†ç›–ä¹‹å‰çš„ç»“æœï¼›å†æ¯”å¦‚ "),t("code",[s._v("clean-webpack-plugin")]),s._v(" ï¼Œä¼šåœ¨ç»“æœè¾“å‡ºä¹‹å‰æ¸…é™¤ "),t("code",[s._v("dist")]),s._v(" ç›®å½•ç­‰ç­‰ã€‚")]),s._v(" "),t("li",[s._v("å®Œæˆç¼–è¯‘å¹¶è¾“å‡ºï¼šé€’å½’ç»“æŸåï¼Œå¾—åˆ°æ¯ä¸ªæ–‡ä»¶ç»“æœï¼ŒåŒ…å«è½¬æ¢åçš„æ¨¡å—ä»¥åŠä»–ä»¬ä¹‹é—´çš„ä¾èµ–å…³ç³»ï¼Œæ ¹æ®"),t("code",[s._v("entry")]),s._v(" ä»¥åŠ "),t("code",[s._v("output")]),s._v(" ç­‰é…ç½®ç”Ÿæˆä»£ç å—"),t("code",[s._v("chunk")]),s._v("ã€‚")]),s._v(" "),t("li",[s._v("æ‰“åŒ…å®Œæˆï¼šæ ¹æ®"),t("code",[s._v("output")]),s._v("è¾“å‡ºæ‰€æœ‰çš„"),t("code",[s._v("chunk")]),s._v("åˆ°å¯¹åº”çš„æ–‡ä»¶ç›®å½•")])]),s._v(" "),t("h2",{attrs:{id:"_4-çƒ­æ›´æ–°åŸç†"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-çƒ­æ›´æ–°åŸç†"}},[s._v("#")]),s._v(" 4. çƒ­æ›´æ–°åŸç†")]),s._v(" "),t("h4",{attrs:{id:"ä¸€ã€å‰è¨€-webpack-çƒ­æ›´æ–°"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ä¸€ã€å‰è¨€-webpack-çƒ­æ›´æ–°"}},[s._v("#")]),s._v(" ä¸€ã€å‰è¨€ - webpack çƒ­æ›´æ–°")]),s._v(" "),t("blockquote",[t("p",[t("code",[s._v("Hot Module Replacement")]),s._v("ï¼Œç®€ç§°"),t("code",[s._v("HMR")]),s._v("ï¼Œæ— éœ€å®Œå…¨åˆ·æ–°æ•´ä¸ªé¡µé¢çš„åŒæ—¶ï¼Œæ›´æ–°æ¨¡å—ã€‚"),t("code",[s._v("HMR")]),s._v("çš„å¥½å¤„ï¼Œåœ¨æ—¥å¸¸å¼€å‘å·¥ä½œä¸­ä½“ä¼šé¢‡æ·±ï¼š"),t("strong",[s._v("èŠ‚çœå®è´µçš„å¼€å‘æ—¶é—´ã€æå‡å¼€å‘ä½“éªŒ")]),s._v("ã€‚")])]),s._v(" "),t("p",[s._v("åˆ·æ–°æˆ‘ä»¬ä¸€èˆ¬åˆ†ä¸ºä¸¤ç§ï¼š")]),s._v(" "),t("ul",[t("li",[s._v("ä¸€ç§æ˜¯é¡µé¢åˆ·æ–°ï¼Œä¸ä¿ç•™é¡µé¢çŠ¶æ€ï¼Œå°±æ˜¯ç®€å•ç²—æš´ï¼Œç›´æ¥"),t("code",[s._v("window.location.reload()")]),s._v("ã€‚")]),s._v(" "),t("li",[s._v("å¦ä¸€ç§æ˜¯åŸºäº"),t("code",[s._v("WDS (Webpack-dev-server)")]),s._v("çš„æ¨¡å—çƒ­æ›¿æ¢ï¼Œåªéœ€è¦å±€éƒ¨åˆ·æ–°é¡µé¢ä¸Šå‘ç”Ÿå˜åŒ–çš„æ¨¡å—ï¼ŒåŒæ—¶å¯ä»¥ä¿ç•™å½“å‰çš„é¡µé¢çŠ¶æ€ï¼Œæ¯”å¦‚å¤é€‰æ¡†çš„é€‰ä¸­çŠ¶æ€ã€è¾“å…¥æ¡†çš„è¾“å…¥ç­‰ã€‚")])]),s._v(" "),t("p",[t("code",[s._v("HMR")]),s._v("ä½œä¸ºä¸€ä¸ª"),t("code",[s._v("Webpack")]),s._v("å†…ç½®çš„åŠŸèƒ½ï¼Œå¯ä»¥é€šè¿‡"),t("code",[s._v("HotModuleReplacementPlugin")]),s._v("æˆ–"),t("code",[s._v("--hot")]),s._v("å¼€å¯ã€‚é‚£ä¹ˆï¼Œ"),t("code",[s._v("HMR")]),s._v("åˆ°åº•æ˜¯æ€ä¹ˆå®ç°çƒ­æ›´æ–°çš„å‘¢ï¼Ÿä¸‹é¢è®©æˆ‘ä»¬æ¥äº†è§£ä¸€ä¸‹å§ï¼")]),s._v(" "),t("h4",{attrs:{id:"äºŒã€webpackçš„ç¼–è¯‘æ„å»ºè¿‡ç¨‹"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#äºŒã€webpackçš„ç¼–è¯‘æ„å»ºè¿‡ç¨‹"}},[s._v("#")]),s._v(" äºŒã€webpackçš„ç¼–è¯‘æ„å»ºè¿‡ç¨‹")]),s._v(" "),t("p",[s._v("é¡¹ç›®å¯åŠ¨åï¼Œè¿›è¡Œæ„å»ºæ‰“åŒ…ï¼Œæ§åˆ¶å°ä¼šè¾“å‡ºæ„å»ºè¿‡ç¨‹ï¼Œæˆ‘ä»¬å¯ä»¥è§‚å¯Ÿåˆ°ç”Ÿæˆäº†ä¸€ä¸ª "),t("strong",[s._v("Hashå€¼")]),s._v("ï¼š"),t("code",[s._v("a93fd735d02d98633356")]),s._v("ã€‚")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2019/12/1/16ec043909c70b12~tplv-t2oaga2asx-zoom-in-crop-mark:1304:0:0:0.awebp",alt:"é¦–æ¬¡æ„å»ºæ§åˆ¶å°è¾“å‡ºæ—¥å¿—"}})]),s._v(" "),t("p",[s._v("ç„¶åï¼Œåœ¨æˆ‘ä»¬æ¯æ¬¡ä¿®æ”¹ä»£ç ä¿å­˜åï¼Œæ§åˆ¶å°éƒ½ä¼šå‡ºç° "),t("code",[s._v("Compilingâ€¦")]),s._v("å­—æ ·ï¼Œè§¦å‘æ–°çš„ç¼–è¯‘ä¸­...å¯ä»¥åœ¨æ§åˆ¶å°ä¸­è§‚å¯Ÿåˆ°ï¼š")]),s._v(" "),t("ul",[t("li",[t("strong",[s._v("æ–°çš„Hashå€¼")]),s._v("ï¼š"),t("code",[s._v("a61bdd6e82294ed06fa3")])]),s._v(" "),t("li",[t("strong",[s._v("æ–°çš„jsonæ–‡ä»¶")]),s._v("ï¼š "),t("code",[s._v("a93fd735d02d98633356.hot-update.json")])]),s._v(" "),t("li",[t("strong",[s._v("æ–°çš„jsæ–‡ä»¶")]),s._v("ï¼š"),t("code",[s._v("index.a93fd735d02d98633356.hot-update.js")])])]),s._v(" "),t("p",[t("img",{attrs:{src:"https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2019/12/1/16ec04454e1167f7~tplv-t2oaga2asx-zoom-in-crop-mark:1304:0:0:0.awebp",alt:"ä¿®æ”¹ä»£ç çš„ç¼–è¯‘æ—¥å¿—"}})]),s._v(" "),t("p",[s._v("é¦–å…ˆï¼Œæˆ‘ä»¬çŸ¥é“"),t("code",[s._v("Hash")]),s._v("å€¼ä»£è¡¨æ¯ä¸€æ¬¡ç¼–è¯‘çš„æ ‡è¯†ã€‚å…¶æ¬¡ï¼Œæ ¹æ®æ–°ç”Ÿæˆæ–‡ä»¶åå¯ä»¥å‘ç°ï¼Œä¸Šæ¬¡è¾“å‡ºçš„"),t("code",[s._v("Hash")]),s._v("å€¼ä¼šä½œä¸ºæœ¬æ¬¡ç¼–è¯‘æ–°ç”Ÿæˆçš„æ–‡ä»¶æ ‡è¯†ã€‚ä¾æ¬¡ç±»æ¨ï¼Œæœ¬æ¬¡è¾“å‡ºçš„"),t("code",[s._v("Hash")]),s._v("å€¼ä¼šè¢«ä½œä¸ºä¸‹æ¬¡çƒ­æ›´æ–°çš„æ ‡è¯†ã€‚")]),s._v(" "),t("p",[s._v("ç„¶åçœ‹ä¸€ä¸‹ï¼Œæ–°ç”Ÿæˆçš„æ–‡ä»¶æ˜¯ä»€ä¹ˆï¼Ÿæ¯æ¬¡ä¿®æ”¹ä»£ç ï¼Œç´§æ¥ç€è§¦å‘é‡æ–°ç¼–è¯‘ï¼Œç„¶åæµè§ˆå™¨å°±ä¼šå‘å‡º 2 æ¬¡è¯·æ±‚ã€‚è¯·æ±‚çš„ä¾¿æ˜¯æœ¬æ¬¡æ–°ç”Ÿæˆçš„ 2 ä¸ªæ–‡ä»¶ã€‚å¦‚ä¸‹ï¼š")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2019/12/1/16ec04289af752da~tplv-t2oaga2asx-zoom-in-crop-mark:1304:0:0:0.awebp",alt:"æµè§ˆå™¨è¯·æ±‚"}})]),s._v(" "),t("p",[s._v("é¦–å…ˆçœ‹"),t("code",[s._v("json")]),s._v("æ–‡ä»¶ï¼Œè¿”å›çš„ç»“æœä¸­ï¼Œ"),t("code",[s._v("h")]),s._v("ä»£è¡¨æœ¬æ¬¡æ–°ç”Ÿæˆçš„"),t("code",[s._v("Hash")]),s._v("å€¼ï¼Œç”¨äºä¸‹æ¬¡æ–‡ä»¶çƒ­æ›´æ–°è¯·æ±‚çš„å‰ç¼€ã€‚"),t("code",[s._v("c")]),s._v("è¡¨ç¤ºå½“å‰è¦çƒ­æ›´æ–°çš„æ–‡ä»¶å¯¹åº”çš„æ˜¯"),t("code",[s._v("index")]),s._v("æ¨¡å—ã€‚")]),s._v(" "),t("p",[s._v("å†çœ‹ä¸‹ç”Ÿæˆçš„"),t("code",[s._v("js")]),s._v("æ–‡ä»¶ï¼Œé‚£å°±æ˜¯æœ¬æ¬¡ä¿®æ”¹çš„ä»£ç ï¼Œé‡æ–°ç¼–è¯‘æ‰“åŒ…åçš„ã€‚")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2019/12/1/16ec04316d6ac5e3~tplv-t2oaga2asx-zoom-in-crop-mark:1304:0:0:0.awebp",alt:"img"}})]),s._v(" "),t("p",[s._v("è¿˜æœ‰ä¸€ç§æƒ…å†µæ˜¯ï¼Œå¦‚æœæ²¡æœ‰ä»»ä½•ä»£ç æ”¹åŠ¨ï¼Œç›´æ¥ä¿å­˜æ–‡ä»¶ï¼Œæ§åˆ¶å°ä¹Ÿä¼šè¾“å‡ºç¼–è¯‘æ‰“åŒ…ä¿¡æ¯çš„ã€‚")]),s._v(" "),t("ul",[t("li",[t("strong",[s._v("æ–°çš„Hashå€¼")]),s._v("ï¼š"),t("code",[s._v("d2e4208eca62aa1c5389")])]),s._v(" "),t("li",[t("strong",[s._v("æ–°çš„jsonæ–‡ä»¶")]),s._v("ï¼š"),t("code",[s._v("a61bdd6e82294ed06fa3.hot-update.json")])])]),s._v(" "),t("p",[t("img",{attrs:{src:"https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2019/12/1/16ec04bd0d47eae4~tplv-t2oaga2asx-zoom-in-crop-mark:1304:0:0:0.awebp",alt:"img"}})]),s._v(" "),t("p",[s._v("ä½†æ˜¯æˆ‘ä»¬å‘ç°ï¼Œå¹¶æ²¡æœ‰ç”Ÿæˆæ–°çš„"),t("code",[s._v("js")]),s._v("æ–‡ä»¶ï¼Œå› ä¸ºæ²¡æœ‰æ”¹åŠ¨ä»»ä½•ä»£ç ï¼ŒåŒæ—¶æµè§ˆå™¨å‘å‡ºçš„è¯·æ±‚ï¼Œå¯ä»¥çœ‹åˆ°"),t("code",[s._v("c")]),s._v("å€¼ä¸ºç©ºï¼Œä»£è¡¨æœ¬æ¬¡æ²¡æœ‰éœ€è¦æ›´æ–°çš„ä»£ç ã€‚")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2019/12/1/16ec04c7b158cb3b~tplv-t2oaga2asx-zoom-in-crop-mark:1304:0:0:0.awebp",alt:"img"}})]),s._v(" "),t("p",[s._v("å°å£°è¯´ä¸‹ï¼Œ"),t("code",[s._v("webapck")]),s._v("ä»¥å‰çš„ç‰ˆæœ¬è¿™ç§æƒ…å†µ"),t("code",[s._v("hash")]),s._v("å€¼æ˜¯ä¸ä¼šå˜çš„ï¼Œåé¢å¯èƒ½å‡ºäºä»€ä¹ˆåŸå› æ”¹ç‰ˆäº†ã€‚ç»†èŠ‚ä¸ç”¨åœ¨æ„ï¼Œäº†è§£åŸç†æ‰æ˜¯çœŸè°›!!!")]),s._v(" "),t("p",[s._v("æœ€åæ€è€ƒä¸‹ğŸ¤”ï¼Œæµè§ˆå™¨æ˜¯å¦‚ä½•çŸ¥é“æœ¬åœ°ä»£ç é‡æ–°ç¼–è¯‘äº†ï¼Œå¹¶è¿…é€Ÿè¯·æ±‚äº†æ–°ç”Ÿæˆçš„æ–‡ä»¶ï¼Ÿæ˜¯è°å‘ŠçŸ¥äº†æµè§ˆå™¨ï¼Ÿæµè§ˆå™¨è·å¾—è¿™äº›æ–‡ä»¶åˆæ˜¯å¦‚ä½•çƒ­æ›´æ–°æˆåŠŸçš„ï¼Ÿé‚£è®©æˆ‘ä»¬å¸¦ç€ç–‘é—®çœ‹ä¸‹çƒ­æ›´æ–°çš„è¿‡ç¨‹ï¼Œä»æºç çš„è§’åº¦çœ‹åŸç†ã€‚")]),s._v(" "),t("h4",{attrs:{id:"ä¸‰ã€çƒ­æ›´æ–°å®ç°åŸç†"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ä¸‰ã€çƒ­æ›´æ–°å®ç°åŸç†"}},[s._v("#")]),s._v(" ä¸‰ã€çƒ­æ›´æ–°å®ç°åŸç†")]),s._v(" "),t("p",[s._v("ç›¸ä¿¡å¤§å®¶éƒ½ä¼šé…ç½®"),t("code",[s._v("webpack-dev-server")]),s._v("çƒ­æ›´æ–°ï¼Œæˆ‘å°±ä¸ç¤ºæ„ä¾‹å­äº†ã€‚è‡ªå·±ç½‘ä¸ŠæŸ¥ä¸‹å³å¯ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬å°±æ¥çœ‹ä¸‹"),t("code",[s._v("webpack-dev-server")]),s._v("æ˜¯å¦‚ä½•å®ç°çƒ­æ›´æ–°çš„ï¼Ÿï¼ˆæºç éƒ½æ˜¯ç²¾ç®€è¿‡çš„ï¼Œç¬¬ä¸€è¡Œä¼šæ³¨æ˜ä»£ç è·¯å¾„ï¼Œçœ‹å®Œæœ€å¥½ç»“åˆæºç é£Ÿç”¨ä¸€æ¬¡ï¼‰ã€‚")]),s._v(" "),t("h4",{attrs:{id:"_1-webpack-dev-serverå¯åŠ¨æœ¬åœ°æœåŠ¡"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-webpack-dev-serverå¯åŠ¨æœ¬åœ°æœåŠ¡"}},[s._v("#")]),s._v(" 1. webpack-dev-serverå¯åŠ¨æœ¬åœ°æœåŠ¡")]),s._v(" "),t("p",[s._v("æˆ‘ä»¬æ ¹æ®"),t("code",[s._v("webpack-dev-server")]),s._v("çš„"),t("code",[s._v("package.json")]),s._v("ä¸­çš„"),t("code",[s._v("bin")]),s._v("å‘½ä»¤ï¼Œå¯ä»¥æ‰¾åˆ°å‘½ä»¤çš„å…¥å£æ–‡ä»¶"),t("code",[s._v("bin/webpack-dev-server.js")]),s._v("ã€‚")]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// node_modules/webpack-dev-server/bin/webpack-dev-server.js")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// ç”Ÿæˆwebpackç¼–è¯‘ä¸»å¼•æ“ compiler")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("let")]),s._v(" compiler "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("webpack")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("config"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// å¯åŠ¨æœ¬åœ°æœåŠ¡")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("let")]),s._v(" server "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Server")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("compiler"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" options"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" log"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nserver"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("listen")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("options"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("port"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" options"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("host"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("err")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("err"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("throw")]),s._v(" err"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br")])]),t("p",[s._v("æœ¬åœ°æœåŠ¡ä»£ç ï¼š")]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// node_modules/webpack-dev-server/lib/Server.js")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Server")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("constructor")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("setupApp")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("createServer")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    \n    "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("setupApp")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// ä¾èµ–äº†express")]),s._v("\n    \t"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("app "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("express")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    \n    "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("createServer")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("listeningApp "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" http"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("createServer")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("app"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("listen")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("port"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" hostname"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" fn")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("listeningApp"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("listen")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("port"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" hostname"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("err")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// å¯åŠ¨expressæœåŠ¡åï¼Œå¯åŠ¨websocketæœåŠ¡")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("createSocketServer")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("                                   \n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br")])]),t("p",[s._v("è¿™ä¸€å°èŠ‚ä»£ç ä¸»è¦åšäº†ä¸‰ä»¶äº‹ï¼š")]),s._v(" "),t("ul",[t("li",[s._v("å¯åŠ¨"),t("code",[s._v("webpack")]),s._v("ï¼Œç”Ÿæˆ"),t("code",[s._v("compiler")]),s._v("å®ä¾‹ã€‚"),t("code",[s._v("compiler")]),s._v("ä¸Šæœ‰å¾ˆå¤šæ–¹æ³•ï¼Œæ¯”å¦‚å¯ä»¥å¯åŠ¨ "),t("code",[s._v("webpack")]),s._v(" æ‰€æœ‰"),t("strong",[s._v("ç¼–è¯‘")]),s._v("å·¥ä½œï¼Œä»¥åŠ"),t("strong",[s._v("ç›‘å¬")]),s._v("æœ¬åœ°æ–‡ä»¶çš„å˜åŒ–ã€‚")]),s._v(" "),t("li",[s._v("ä½¿ç”¨"),t("code",[s._v("express")]),s._v("æ¡†æ¶å¯åŠ¨æœ¬åœ°"),t("code",[s._v("server")]),s._v("ï¼Œè®©æµè§ˆå™¨å¯ä»¥è¯·æ±‚æœ¬åœ°çš„"),t("strong",[s._v("é™æ€èµ„æº")]),s._v("ã€‚")]),s._v(" "),t("li",[s._v("æœ¬åœ°"),t("code",[s._v("server")]),s._v("å¯åŠ¨ä¹‹åï¼Œå†å»å¯åŠ¨"),t("code",[s._v("websocket")]),s._v("æœåŠ¡ï¼Œå¦‚æœä¸äº†è§£"),t("code",[s._v("websocket")]),s._v("ï¼Œå»ºè®®ç®€å•äº†è§£ä¸€ä¸‹"),t("a",{attrs:{href:"https://link.juejin.cn?target=https%3A%2F%2Fwww.ruanyifeng.com%2Fblog%2F2017%2F05%2Fwebsocket.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("websocketé€Ÿæˆ"),t("OutboundLink")],1),s._v("ã€‚é€šè¿‡"),t("code",[s._v("websocket")]),s._v("ï¼Œå¯ä»¥å»ºç«‹æœ¬åœ°æœåŠ¡å’Œæµè§ˆå™¨çš„åŒå‘é€šä¿¡ã€‚è¿™æ ·å°±å¯ä»¥å®ç°å½“æœ¬åœ°æ–‡ä»¶å‘ç”Ÿå˜åŒ–ï¼Œç«‹é©¬å‘ŠçŸ¥æµè§ˆå™¨å¯ä»¥çƒ­æ›´æ–°ä»£ç å•¦ï¼")])]),s._v(" "),t("p",[s._v("ä¸Šè¿°ä»£ç ä¸»è¦å¹²äº†ä¸‰ä»¶äº‹ï¼Œä½†æ˜¯æºç åœ¨å¯åŠ¨æœåŠ¡å‰åˆåšäº†å¾ˆå¤šäº‹ï¼Œæ¥ä¸‹æ¥ä¾¿çœ‹çœ‹"),t("code",[s._v("webpack-dev-server/lib/Server.js")]),s._v("è¿˜åšäº†å“ªäº›äº‹ï¼Ÿ")]),s._v(" "),t("h4",{attrs:{id:"_2-ä¿®æ”¹webpack-config-jsçš„entryé…ç½®"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-ä¿®æ”¹webpack-config-jsçš„entryé…ç½®"}},[s._v("#")]),s._v(" 2.ä¿®æ”¹webpack.config.jsçš„entryé…ç½®")]),s._v(" "),t("p",[s._v("å¯åŠ¨æœ¬åœ°æœåŠ¡å‰ï¼Œè°ƒç”¨äº†"),t("code",[s._v("updateCompiler(this.compiler)")]),s._v("æ–¹æ³•ã€‚è¿™ä¸ªæ–¹æ³•ä¸­æœ‰ 2 æ®µå…³é”®æ€§ä»£ç ã€‚ä¸€ä¸ªæ˜¯è·å–"),t("code",[s._v("websocket")]),s._v("å®¢æˆ·ç«¯ä»£ç è·¯å¾„ï¼Œå¦ä¸€ä¸ªæ˜¯æ ¹æ®é…ç½®è·å–"),t("code",[s._v("webpack")]),s._v("çƒ­æ›´æ–°ä»£ç è·¯å¾„ã€‚")]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// è·å–websocketå®¢æˆ·ç«¯ä»£ç ")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" clientEntry "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token template-string"}},[t("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[s._v("`")]),t("span",{pre:!0,attrs:{class:"token interpolation"}},[t("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[s._v("${")]),s._v("require"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("resolve")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'../../client/'")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[s._v("}")])]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("?")]),t("span",{pre:!0,attrs:{class:"token interpolation"}},[t("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[s._v("${")]),s._v("domain"),t("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[s._v("}")])]),t("span",{pre:!0,attrs:{class:"token interpolation"}},[t("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[s._v("${")]),s._v("sockHost"),t("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[s._v("}")])]),t("span",{pre:!0,attrs:{class:"token interpolation"}},[t("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[s._v("${")]),s._v("sockPath"),t("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[s._v("}")])]),t("span",{pre:!0,attrs:{class:"token interpolation"}},[t("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[s._v("${")]),s._v("sockPort"),t("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[s._v("}")])]),t("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[s._v("`")])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// æ ¹æ®é…ç½®è·å–çƒ­æ›´æ–°ä»£ç ")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("let")]),s._v(" hotEntry"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("options"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("hotOnly"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    hotEntry "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" require"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("resolve")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'webpack/hot/only-dev-server'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("else")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("options"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("hot"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    hotEntry "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" require"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("resolve")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'webpack/hot/dev-server'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br")])]),t("p",[s._v("ä¿®æ”¹åçš„"),t("code",[s._v("webpack")]),s._v("å…¥å£é…ç½®å¦‚ä¸‹ï¼š")]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// ä¿®æ”¹åçš„entryå…¥å£")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("entry")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("index")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" \n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// ä¸Šé¢è·å–çš„clientEntry")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'xxx/node_modules/webpack-dev-server/client/index.js?http://localhost:8080'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// ä¸Šé¢è·å–çš„hotEntry")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'xxx/node_modules/webpack/hot/dev-server.js'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// å¼€å‘é…ç½®çš„å…¥å£")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'./src/index.js'")]),s._v("\n    \t"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br")])]),t("p",[s._v("ä¸ºä»€ä¹ˆè¦æ–°å¢äº† 2 ä¸ªæ–‡ä»¶ï¼Ÿåœ¨å…¥å£é»˜é»˜å¢åŠ äº† 2 ä¸ªæ–‡ä»¶ï¼Œé‚£å°±æ„å‘³ä¼šä¸€åŒæ‰“åŒ…åˆ°"),t("code",[s._v("bundle")]),s._v("æ–‡ä»¶ä¸­å»ï¼Œä¹Ÿå°±æ˜¯çº¿ä¸Šè¿è¡Œæ—¶ã€‚")]),s._v(" "),t("p",[t("strong",[s._v("ï¼ˆ1ï¼‰webpack-dev-server/client/index.js")])]),s._v(" "),t("p",[s._v("é¦–å…ˆè¿™ä¸ªæ–‡ä»¶ç”¨äº"),t("code",[s._v("websocket")]),s._v("çš„ï¼Œå› ä¸º"),t("code",[s._v("websoket")]),s._v("æ˜¯åŒå‘é€šä¿¡ï¼Œå¦‚æœä¸äº†è§£"),t("code",[s._v("websocket")]),s._v("ï¼Œå»ºè®®ç®€å•äº†è§£ä¸€ä¸‹"),t("a",{attrs:{href:"https://link.juejin.cn?target=https%3A%2F%2Fwww.ruanyifeng.com%2Fblog%2F2017%2F05%2Fwebsocket.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("websocketé€Ÿæˆ"),t("OutboundLink")],1),s._v("ã€‚æˆ‘ä»¬åœ¨ç¬¬ 1 æ­¥ "),t("code",[s._v("webpack-dev-server")]),s._v("åˆå§‹åŒ– çš„è¿‡ç¨‹ä¸­ï¼Œå¯åŠ¨çš„æ˜¯æœ¬åœ°æœåŠ¡ç«¯çš„"),t("code",[s._v("websocket")]),s._v("ã€‚é‚£å®¢æˆ·ç«¯ä¹Ÿå°±æ˜¯æˆ‘ä»¬çš„æµè§ˆå™¨ï¼Œæµè§ˆå™¨è¿˜æ²¡æœ‰å’ŒæœåŠ¡ç«¯é€šä¿¡çš„ä»£ç å‘¢ï¼Ÿæ€»ä¸èƒ½è®©å¼€å‘è€…å»å†™å§ã€‚å› æ­¤æˆ‘ä»¬éœ€è¦æŠŠ"),t("code",[s._v("websocket")]),s._v("å®¢æˆ·ç«¯é€šä¿¡ä»£ç å·å·å¡åˆ°æˆ‘ä»¬çš„ä»£ç ä¸­ã€‚å®¢æˆ·ç«¯å…·ä½“çš„ä»£ç åé¢ä¼šåœ¨åˆé€‚çš„æ—¶æœºç»†è®²å“¦ã€‚")]),s._v(" "),t("p",[t("strong",[s._v("ï¼ˆ2ï¼‰webpack/hot/dev-server.js")])]),s._v(" "),t("p",[s._v("è¿™ä¸ªæ–‡ä»¶ä¸»è¦æ˜¯ç”¨äºæ£€æŸ¥æ›´æ–°é€»è¾‘çš„ï¼Œè¿™é‡Œå¤§å®¶çŸ¥é“å°±å¥½ï¼Œä»£ç åé¢ä¼šåœ¨åˆé€‚çš„æ—¶æœºï¼ˆ"),t("strong",[s._v("ç¬¬5æ­¥")]),s._v("ï¼‰ç»†è®²ã€‚")]),s._v(" "),t("h4",{attrs:{id:"_3-ç›‘å¬webpackç¼–è¯‘ç»“æŸ"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-ç›‘å¬webpackç¼–è¯‘ç»“æŸ"}},[s._v("#")]),s._v(" 3. ç›‘å¬webpackç¼–è¯‘ç»“æŸ")]),s._v(" "),t("p",[s._v("ä¿®æ”¹å¥½å…¥å£é…ç½®åï¼Œåˆè°ƒç”¨äº†"),t("code",[s._v("setupHooks")]),s._v("æ–¹æ³•ã€‚è¿™ä¸ªæ–¹æ³•æ˜¯ç”¨æ¥æ³¨å†Œç›‘å¬äº‹ä»¶çš„ï¼Œç›‘å¬æ¯æ¬¡"),t("code",[s._v("webpack")]),s._v("ç¼–è¯‘å®Œæˆã€‚")]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// node_modules/webpack-dev-server/lib/Server.js")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// ç»‘å®šç›‘å¬äº‹ä»¶")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("setupHooks")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("done"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" compiler"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("hooks"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// ç›‘å¬webpackçš„doneé’©å­ï¼Œtapableæä¾›çš„ç›‘å¬æ–¹æ³•")]),s._v("\n    done"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("tap")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'webpack-dev-server'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("stats")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("_sendStats")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("sockets"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getStats")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("stats"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("_stats "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" stats"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br")])]),t("p",[s._v("å½“ç›‘å¬åˆ°ä¸€æ¬¡"),t("code",[s._v("webpack")]),s._v("ç¼–è¯‘ç»“æŸï¼Œå°±ä¼šè°ƒç”¨"),t("code",[s._v("_sendStats")]),s._v("æ–¹æ³•é€šè¿‡"),t("code",[s._v("websocket")]),s._v("ç»™æµè§ˆå™¨å‘é€é€šçŸ¥ï¼Œ"),t("code",[s._v("ok")]),s._v("å’Œ"),t("code",[s._v("hash")]),s._v("äº‹ä»¶ï¼Œè¿™æ ·æµè§ˆå™¨å°±å¯ä»¥æ‹¿åˆ°æœ€æ–°çš„"),t("code",[s._v("hash")]),s._v("å€¼äº†ï¼Œåšæ£€æŸ¥æ›´æ–°é€»è¾‘ã€‚")]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// é€šè¿‡websoketç»™å®¢æˆ·ç«¯å‘æ¶ˆæ¯")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("_sendStats")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sockWrite")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("sockets"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'hash'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" stats"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("hash"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sockWrite")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("sockets"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'ok'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("h4",{attrs:{id:"_4-webpackç›‘å¬æ–‡ä»¶å˜åŒ–"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-webpackç›‘å¬æ–‡ä»¶å˜åŒ–"}},[s._v("#")]),s._v(" 4. webpackç›‘å¬æ–‡ä»¶å˜åŒ–")]),s._v(" "),t("p",[s._v("æ¯æ¬¡ä¿®æ”¹ä»£ç ï¼Œå°±ä¼šè§¦å‘ç¼–è¯‘ã€‚è¯´æ˜æˆ‘ä»¬è¿˜éœ€è¦ç›‘å¬æœ¬åœ°ä»£ç çš„å˜åŒ–ï¼Œä¸»è¦æ˜¯é€šè¿‡"),t("code",[s._v("setupDevMiddleware")]),s._v("æ–¹æ³•å®ç°çš„ã€‚")]),s._v(" "),t("p",[s._v("è¿™ä¸ªæ–¹æ³•ä¸»è¦æ‰§è¡Œäº†"),t("code",[s._v("webpack-dev-middleware")]),s._v("åº“ã€‚å¾ˆå¤šäººåˆ†ä¸æ¸…"),t("code",[s._v("webpack-dev-middleware")]),s._v("å’Œ"),t("code",[s._v("webpack-dev-server")]),s._v("çš„åŒºåˆ«ã€‚å…¶å®å°±æ˜¯å› ä¸º"),t("code",[s._v("webpack-dev-server")]),s._v("åªè´Ÿè´£å¯åŠ¨æœåŠ¡å’Œå‰ç½®å‡†å¤‡å·¥ä½œï¼Œæ‰€æœ‰æ–‡ä»¶ç›¸å…³çš„æ“ä½œéƒ½æŠ½ç¦»åˆ°"),t("code",[s._v("webpack-dev-middleware")]),s._v("åº“äº†ï¼Œä¸»è¦æ˜¯æœ¬åœ°æ–‡ä»¶çš„"),t("strong",[s._v("ç¼–è¯‘")]),s._v("å’Œ"),t("strong",[s._v("è¾“å‡º")]),s._v("ä»¥åŠ"),t("strong",[s._v("ç›‘å¬")]),s._v("ï¼Œæ— éå°±æ˜¯èŒè´£çš„åˆ’åˆ†æ›´æ¸…æ™°äº†ã€‚")]),s._v(" "),t("p",[s._v("é‚£æˆ‘ä»¬æ¥çœ‹ä¸‹"),t("code",[s._v("webpack-dev-middleware")]),s._v("æºç é‡Œåšäº†ä»€ä¹ˆäº‹:")]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// node_modules/webpack-dev-middleware/index.js")]),s._v("\ncompiler"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("watch")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("options"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("watchOptions"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("err")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("err"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/*é”™è¯¯å¤„ç†*/")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// é€šè¿‡â€œmemory-fsâ€åº“å°†æ‰“åŒ…åçš„æ–‡ä»¶å†™å…¥å†…å­˜")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("setFs")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("context"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" compiler"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br")])]),t("p",[s._v("ï¼ˆ1ï¼‰è°ƒç”¨äº†"),t("code",[s._v("compiler.watch")]),s._v("æ–¹æ³•ï¼Œåœ¨ç¬¬ 1 æ­¥ä¸­ä¹Ÿæåˆ°è¿‡ï¼Œ"),t("code",[s._v("compiler")]),s._v("çš„å¼ºå¤§ã€‚è¿™ä¸ªæ–¹æ³•ä¸»è¦å°±åšäº† 2 ä»¶äº‹ï¼š")]),s._v(" "),t("ul",[t("li",[s._v("é¦–å…ˆå¯¹æœ¬åœ°æ–‡ä»¶ä»£ç è¿›è¡Œç¼–è¯‘æ‰“åŒ…ï¼Œä¹Ÿå°±æ˜¯"),t("code",[s._v("webpack")]),s._v("çš„ä¸€ç³»åˆ—ç¼–è¯‘æµç¨‹ã€‚")]),s._v(" "),t("li",[s._v("å…¶æ¬¡ç¼–è¯‘ç»“æŸåï¼Œå¼€å¯å¯¹æœ¬åœ°æ–‡ä»¶çš„ç›‘å¬ï¼Œå½“æ–‡ä»¶å‘ç”Ÿå˜åŒ–ï¼Œé‡æ–°ç¼–è¯‘ï¼Œç¼–è¯‘å®Œæˆä¹‹åç»§ç»­ç›‘å¬ã€‚")])]),s._v(" "),t("p",[s._v("ä¸ºä»€ä¹ˆä»£ç çš„æ”¹åŠ¨ä¿å­˜ä¼šè‡ªåŠ¨ç¼–è¯‘ï¼Œé‡æ–°æ‰“åŒ…ï¼Ÿè¿™ä¸€ç³»åˆ—çš„é‡æ–°æ£€æµ‹ç¼–è¯‘å°±å½’åŠŸäº"),t("code",[s._v("compiler.watch")]),s._v("è¿™ä¸ªæ–¹æ³•äº†ã€‚ç›‘å¬æœ¬åœ°æ–‡ä»¶çš„å˜åŒ–ä¸»è¦æ˜¯é€šè¿‡"),t("strong",[s._v("æ–‡ä»¶çš„ç”Ÿæˆæ—¶é—´")]),s._v("æ˜¯å¦æœ‰å˜åŒ–ï¼Œè¿™é‡Œå°±ä¸ç»†è®²äº†ã€‚")]),s._v(" "),t("p",[s._v("ï¼ˆ2ï¼‰æ‰§è¡Œ"),t("code",[s._v("setFs")]),s._v("æ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•ä¸»è¦ç›®çš„å°±æ˜¯å°†ç¼–è¯‘åçš„æ–‡ä»¶æ‰“åŒ…åˆ°å†…å­˜ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆåœ¨å¼€å‘çš„è¿‡ç¨‹ä¸­ï¼Œä½ ä¼šå‘ç°"),t("code",[s._v("dist")]),s._v("ç›®å½•æ²¡æœ‰æ‰“åŒ…åçš„ä»£ç ï¼Œå› ä¸ºéƒ½åœ¨å†…å­˜ä¸­ã€‚åŸå› å°±åœ¨äºè®¿é—®å†…å­˜ä¸­çš„ä»£ç æ¯”è®¿é—®æ–‡ä»¶ç³»ç»Ÿä¸­çš„æ–‡ä»¶æ›´å¿«ï¼Œè€Œä¸”ä¹Ÿå‡å°‘äº†ä»£ç å†™å…¥æ–‡ä»¶çš„å¼€é”€ï¼Œè¿™ä¸€åˆ‡éƒ½å½’åŠŸäº"),t("code",[s._v("memory-fs")]),s._v("ã€‚")]),s._v(" "),t("h4",{attrs:{id:"_5-æµè§ˆå™¨æ¥æ”¶åˆ°çƒ­æ›´æ–°çš„é€šçŸ¥"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5-æµè§ˆå™¨æ¥æ”¶åˆ°çƒ­æ›´æ–°çš„é€šçŸ¥"}},[s._v("#")]),s._v(" 5. æµè§ˆå™¨æ¥æ”¶åˆ°çƒ­æ›´æ–°çš„é€šçŸ¥")]),s._v(" "),t("p",[s._v("æˆ‘ä»¬å·²ç»å¯ä»¥ç›‘å¬åˆ°æ–‡ä»¶çš„å˜åŒ–äº†ï¼Œå½“æ–‡ä»¶å‘ç”Ÿå˜åŒ–ï¼Œå°±è§¦å‘é‡æ–°ç¼–è¯‘ã€‚åŒæ—¶è¿˜ç›‘å¬äº†æ¯æ¬¡ç¼–è¯‘ç»“æŸçš„äº‹ä»¶ã€‚å½“ç›‘å¬åˆ°ä¸€æ¬¡"),t("code",[s._v("webpack")]),s._v("ç¼–è¯‘ç»“æŸï¼Œ"),t("code",[s._v("_sendStats")]),s._v("æ–¹æ³•å°±é€šè¿‡"),t("code",[s._v("websoket")]),s._v("ç»™æµè§ˆå™¨å‘é€é€šçŸ¥ï¼Œæ£€æŸ¥ä¸‹æ˜¯å¦éœ€è¦çƒ­æ›´æ–°ã€‚ä¸‹é¢é‡ç‚¹è®²çš„å°±æ˜¯"),t("code",[s._v("_sendStats")]),s._v("æ–¹æ³•ä¸­çš„"),t("code",[s._v("ok")]),s._v("å’Œ"),t("code",[s._v("hash")]),s._v("äº‹ä»¶éƒ½åšäº†ä»€ä¹ˆã€‚")]),s._v(" "),t("p",[s._v("é‚£æµè§ˆå™¨æ˜¯å¦‚ä½•æ¥æ”¶åˆ°"),t("code",[s._v("websocket")]),s._v("çš„æ¶ˆæ¯å‘¢ï¼Ÿå›å¿†ä¸‹ç¬¬ 2 æ­¥éª¤å¢åŠ çš„å…¥å£æ–‡ä»¶ï¼Œä¹Ÿå°±æ˜¯"),t("code",[s._v("websocket")]),s._v("å®¢æˆ·ç«¯ä»£ç ã€‚")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("'xxx/node_modules/webpack-dev-server/client/index.js?http://localhost:8080'\nå¤åˆ¶ä»£ç \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[s._v("è¿™ä¸ªæ–‡ä»¶çš„ä»£ç ä¼šè¢«æ‰“åŒ…åˆ°"),t("code",[s._v("bundle.js")]),s._v("ä¸­ï¼Œè¿è¡Œåœ¨æµè§ˆå™¨ä¸­ã€‚æ¥çœ‹ä¸‹è¿™ä¸ªæ–‡ä»¶çš„æ ¸å¿ƒä»£ç å§ã€‚")]),s._v(" "),t("div",{staticClass:"language-javascript line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-javascript"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// webpack-dev-server/client/index.js")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),s._v(" socket "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("require")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'./socket'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),s._v(" onSocketMessage "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token function-variable function"}},[s._v("hash")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("hash")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("_hash")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// æ›´æ–°currentHashå€¼")]),s._v("\n        status"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("currentHash "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" _hash"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token function-variable function"}},[s._v("ok")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ok")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sendMessage")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'Ok'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// è¿›è¡Œæ›´æ–°æ£€æŸ¥ç­‰æ“ä½œ")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("reloadApp")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("options"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" status"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// è¿æ¥æœåŠ¡åœ°å€socketUrlï¼Œ?http://localhost:8080ï¼Œæœ¬åœ°æœåŠ¡åœ°å€")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("socket")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("socketUrl"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" onSocketMessage"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("reloadApp")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\t"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("hot"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        log"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("info")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'[WDS] App hot update...'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        \n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// hotEmitterå…¶å®å°±æ˜¯EventEmitterçš„å®ä¾‹")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),s._v(" hotEmitter "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("require")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'webpack/hot/emitter'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        hotEmitter"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("emit")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'webpackHotUpdate'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" currentHash"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" \n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br")])]),t("p",[t("code",[s._v("socket")]),s._v("æ–¹æ³•å»ºç«‹äº†"),t("code",[s._v("websocket")]),s._v("å’ŒæœåŠ¡ç«¯çš„è¿æ¥ï¼Œå¹¶æ³¨å†Œäº† 2 ä¸ªç›‘å¬äº‹ä»¶ã€‚")]),s._v(" "),t("ul",[t("li",[t("code",[s._v("hash")]),s._v("äº‹ä»¶ï¼Œæ›´æ–°æœ€æ–°ä¸€æ¬¡æ‰“åŒ…åçš„"),t("code",[s._v("hash")]),s._v("å€¼ã€‚")]),s._v(" "),t("li",[t("code",[s._v("ok")]),s._v("äº‹ä»¶ï¼Œè¿›è¡Œçƒ­æ›´æ–°æ£€æŸ¥ã€‚")])]),s._v(" "),t("p",[s._v("çƒ­æ›´æ–°æ£€æŸ¥äº‹ä»¶æ˜¯è°ƒç”¨"),t("code",[s._v("reloadApp")]),s._v("æ–¹æ³•ã€‚æ¯”è¾ƒå¥‡æ€ªçš„æ˜¯ï¼Œè¿™ä¸ªæ–¹æ³•åˆåˆ©ç”¨"),t("code",[s._v("node.js")]),s._v("çš„"),t("code",[s._v("EventEmitter")]),s._v("ï¼Œå‘å‡º"),t("code",[s._v("webpackHotUpdate")]),s._v("æ¶ˆæ¯ã€‚è¿™æ˜¯ä¸ºä»€ä¹ˆï¼Ÿä¸ºä»€ä¹ˆä¸ç›´æ¥è¿›è¡Œæ£€æŸ¥æ›´æ–°å‘¢ï¼Ÿ")]),s._v(" "),t("p",[s._v("ä¸ªäººç†è§£å°±æ˜¯ä¸ºäº†æ›´å¥½çš„ç»´æŠ¤ä»£ç ï¼Œä»¥åŠèŒè´£åˆ’åˆ†çš„æ›´æ˜ç¡®ã€‚"),t("code",[s._v("websocket")]),s._v("ä»…ä»…ç”¨äºå®¢æˆ·ç«¯ï¼ˆæµè§ˆå™¨ï¼‰å’ŒæœåŠ¡ç«¯è¿›è¡Œé€šä¿¡ã€‚è€ŒçœŸæ­£åšäº‹æƒ…çš„æ´»è¿˜æ˜¯äº¤å›ç»™äº†"),t("code",[s._v("webpack")]),s._v("ã€‚")]),s._v(" "),t("p",[s._v("é‚£"),t("code",[s._v("webpack")]),s._v("æ€ä¹ˆåšçš„å‘¢ï¼Ÿå†æ¥å›å¿†ä¸‹ç¬¬ 2 æ­¥ã€‚å…¥å£æ–‡ä»¶è¿˜æœ‰ä¸€ä¸ªæ–‡ä»¶æ²¡æœ‰è®²åˆ°ï¼Œå°±æ˜¯ï¼š")]),s._v(" "),t("div",{staticClass:"language-javascript line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-javascript"}},[t("code",[t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'xxx/node_modules/webpack/hot/dev-server.js'")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("è¿™ä¸ªæ–‡ä»¶çš„ä»£ç åŒæ ·ä¼šè¢«æ‰“åŒ…åˆ°"),t("code",[s._v("bundle.js")]),s._v("ä¸­ï¼Œè¿è¡Œåœ¨æµè§ˆå™¨ä¸­ã€‚è¿™ä¸ªæ–‡ä»¶åšäº†ä»€ä¹ˆå°±æ˜¾è€Œæ˜“è§äº†å§ï¼å…ˆç„ä¸€çœ¼ä»£ç ï¼š")]),s._v(" "),t("div",{staticClass:"language-javascript line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-javascript"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// node_modules/webpack/hot/dev-server.js")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function-variable function"}},[s._v("check")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("check")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    module"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("hot"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("check")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("then")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("updatedModules")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// å®¹é”™ï¼Œç›´æ¥åˆ·æ–°é¡µé¢")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v("updatedModules"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                window"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("location"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("reload")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n                "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n            \n            "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// çƒ­æ›´æ–°ç»“æŸï¼Œæ‰“å°ä¿¡æ¯")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("upToDate")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"info"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"[HMR] App is up to date."')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("catch")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("err")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            window"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("location"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("reload")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),s._v(" hotEmitter "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("require")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"./emitter"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nhotEmitter"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("on")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"webpackHotUpdate"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("currentHash")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    lastHash "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" currentHash"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("check")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br")])]),t("p",[s._v("è¿™é‡Œ"),t("code",[s._v("webpack")]),s._v("ç›‘å¬åˆ°äº†"),t("code",[s._v("webpackHotUpdate")]),s._v("äº‹ä»¶ï¼Œå¹¶è·å–æœ€æ–°äº†æœ€æ–°çš„"),t("code",[s._v("hash")]),s._v("å€¼ï¼Œç„¶åç»ˆäºè¿›è¡Œæ£€æŸ¥æ›´æ–°äº†ã€‚æ£€æŸ¥æ›´æ–°å‘¢è°ƒç”¨çš„æ˜¯"),t("code",[s._v("module.hot.check")]),s._v("æ–¹æ³•ã€‚é‚£ä¹ˆé—®é¢˜åˆæ¥äº†ï¼Œ"),t("code",[s._v("module.hot.check")]),s._v("åˆæ˜¯å“ªé‡Œå†’å‡ºæ¥äº†çš„ï¼ç­”æ¡ˆæ˜¯"),t("code",[s._v("HotModuleReplacementPlugin")]),s._v("æå¾—é¬¼ã€‚è¿™é‡Œç•™ä¸ªç–‘é—®ï¼Œç»§ç»­å¾€ä¸‹çœ‹ã€‚")]),s._v(" "),t("h4",{attrs:{id:"_6-hotmodulereplacementplugin"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_6-hotmodulereplacementplugin"}},[s._v("#")]),s._v(" 6. HotModuleReplacementPlugin")]),s._v(" "),t("p",[s._v("ä» webpack-dev-server v4 å¼€å§‹ï¼ŒHMR æ˜¯é»˜è®¤å¯ç”¨çš„ã€‚å®ƒä¼šè‡ªåŠ¨åº”ç”¨ "),t("a",{attrs:{href:"https://webpack.docschina.org/plugins/hot-module-replacement-plugin/",target:"_blank",rel:"noopener noreferrer"}},[t("code",[s._v("webpack.HotModuleReplacementPlugin")]),t("OutboundLink")],1),s._v("ï¼Œè¿™æ˜¯å¯ç”¨ HMR æ‰€å¿…éœ€çš„ã€‚å› æ­¤å½“ "),t("code",[s._v("hot")]),s._v(" è®¾ç½®ä¸º "),t("code",[s._v("true")]),s._v(" æˆ–è€…é€šè¿‡ CLI è®¾ç½® "),t("code",[s._v("--hot")]),s._v("ï¼Œä½ ä¸éœ€è¦åœ¨ä½ çš„ "),t("code",[s._v("webpack.config.js")]),s._v(" æ·»åŠ è¯¥æ’ä»¶ã€‚æŸ¥çœ‹ "),t("a",{attrs:{href:"https://webpack.docschina.org/concepts/hot-module-replacement/",target:"_blank",rel:"noopener noreferrer"}},[s._v("HMR concepts page"),t("OutboundLink")],1),s._v(" ä»¥è·å–æ›´å¤šä¿¡æ¯ã€‚")]),s._v(" "),t("p",[s._v("å‰é¢å¥½åƒä¸€ç›´æ˜¯"),t("code",[s._v("webpack-dev-server")]),s._v("åšçš„äº‹ï¼Œé‚£"),t("code",[s._v("HotModuleReplacementPlugin")]),s._v("åœ¨çƒ­æ›´æ–°è¿‡ç¨‹ä¸­åˆåšäº†ä»€ä¹ˆä¼Ÿå¤§çš„äº‹ä¸šå‘¢ï¼Ÿ")]),s._v(" "),t("p",[s._v("é¦–å…ˆä½ å¯ä»¥å¯¹æ¯”ä¸‹ï¼Œé…ç½®çƒ­æ›´æ–°å’Œä¸é…ç½®æ—¶"),t("code",[s._v("bundle.js")]),s._v("çš„åŒºåˆ«ã€‚å†…å­˜ä¸­çœ‹ä¸åˆ°ï¼Ÿç›´æ¥æ‰§è¡Œ"),t("code",[s._v("webpack")]),s._v("å‘½ä»¤å°±å¯ä»¥çœ‹åˆ°ç”Ÿæˆçš„"),t("code",[s._v("bundle.js")]),s._v("æ–‡ä»¶å•¦ã€‚ä¸è¦ç”¨"),t("code",[s._v("webpack-dev-server")]),s._v("å¯åŠ¨å°±å¥½äº†ã€‚")]),s._v(" "),t("p",[s._v("ï¼ˆ1ï¼‰æ²¡æœ‰é…ç½®çš„ã€‚")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2019/12/1/16ec0c9e8fd12349~tplv-t2oaga2asx-zoom-in-crop-mark:1304:0:0:0.awebp",alt:"img"}})]),s._v(" "),t("p",[s._v("ï¼ˆ2ï¼‰é…ç½®äº†"),t("code",[s._v("HotModuleReplacementPlugin")]),s._v("æˆ–"),t("code",[s._v("--hot")]),s._v("çš„ã€‚")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2019/12/1/16ec0c90092fa0ac~tplv-t2oaga2asx-zoom-in-crop-mark:1304:0:0:0.awebp",alt:"img"}})]),s._v(" "),t("p",[s._v("å“¦~ æˆ‘ä»¬å‘ç°"),t("code",[s._v("moudle")]),s._v("æ–°å¢äº†ä¸€ä¸ªå±æ€§ä¸º"),t("code",[s._v("hot")]),s._v("ï¼Œå†çœ‹"),t("code",[s._v("hotCreateModule")]),s._v("æ–¹æ³•ã€‚ è¿™ä¸å°±æ‰¾åˆ°"),t("code",[s._v("module.hot.check")]),s._v("æ˜¯å“ªé‡Œå†’å‡ºæ¥çš„ã€‚")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2019/12/1/16ec0dc36018973f~tplv-t2oaga2asx-zoom-in-crop-mark:1304:0:0:0.awebp",alt:"img"}})]),s._v(" "),t("p",[s._v("ç»è¿‡å¯¹æ¯”æ‰“åŒ…åçš„æ–‡ä»¶ï¼Œ"),t("code",[s._v("__webpack_require__")]),s._v("ä¸­çš„"),t("code",[s._v("moudle")]),s._v("ä»¥åŠä»£ç è¡Œæ•°çš„ä¸åŒã€‚æˆ‘ä»¬éƒ½å¯ä»¥å‘ç°"),t("code",[s._v("HotModuleReplacementPlugin")]),s._v("åŸæ¥ä¹Ÿæ˜¯é»˜é»˜çš„å¡äº†å¾ˆå¤šä»£ç åˆ°"),t("code",[s._v("bundle.js")]),s._v("ä¸­å‘€ã€‚è¿™å’Œç¬¬ 2 æ­¥éª¤å¾ˆæ˜¯ç›¸ä¼¼å“¦ï¼ä¸ºä»€ä¹ˆï¼Œå› ä¸ºæ£€æŸ¥æ›´æ–°æ˜¯åœ¨æµè§ˆå™¨ä¸­æ“ä½œå‘€ã€‚è¿™äº›ä»£ç å¿…é¡»åœ¨è¿è¡Œæ—¶çš„ç¯å¢ƒã€‚")]),s._v(" "),t("p",[s._v("ä½ ä¹Ÿå¯ä»¥ç›´æ¥çœ‹æµè§ˆå™¨"),t("code",[s._v("Sources")]),s._v("ä¸‹çš„ä»£ç ï¼Œä¼šå‘ç°"),t("code",[s._v("webpack")]),s._v("å’Œ"),t("code",[s._v("plugin")]),s._v("å·å·åŠ çš„ä»£ç éƒ½åœ¨å“¦ã€‚åœ¨è¿™é‡Œè°ƒè¯•ä¹Ÿå¾ˆæ–¹ä¾¿ã€‚")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2019/12/1/16ec0d4634af2b3c~tplv-t2oaga2asx-zoom-in-crop-mark:1304:0:0:0.awebp",alt:"img"}})]),s._v(" "),t("p",[t("code",[s._v("HotModuleReplacementPlugin")]),s._v("å¦‚ä½•åšåˆ°çš„ï¼Ÿè¿™é‡Œæˆ‘å°±ä¸è®²äº†ï¼Œå› ä¸ºè¿™éœ€è¦ä½ å¯¹"),t("code",[s._v("tapable")]),s._v("ä»¥åŠ"),t("code",[s._v("plugin")]),s._v("æœºåˆ¶æœ‰ä¸€å®šäº†è§£ï¼Œå¯ä»¥çœ‹ä¸‹æˆ‘å†™çš„æ–‡ç« "),t("a",{attrs:{href:"https://juejin.cn/post/6844904004435050503",target:"_blank",rel:"noopener noreferrer"}},[s._v("Webpackæ’ä»¶æœºåˆ¶ä¹‹Tapable-æºç è§£æ"),t("OutboundLink")],1),s._v("ã€‚å½“ç„¶ä½ ä¹Ÿå¯ä»¥é€‰æ‹©è·³è¿‡ï¼Œåªå…³å¿ƒçƒ­æ›´æ–°æœºåˆ¶å³å¯ï¼Œæ¯•ç«Ÿä¿¡æ¯é‡å¤ªå¤§ã€‚")]),s._v(" "),t("h4",{attrs:{id:"_7-moudle-hot-check-å¼€å§‹çƒ­æ›´æ–°"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_7-moudle-hot-check-å¼€å§‹çƒ­æ›´æ–°"}},[s._v("#")]),s._v(" 7. moudle.hot.check å¼€å§‹çƒ­æ›´æ–°")]),s._v(" "),t("p",[s._v("é€šè¿‡ç¬¬ 6 æ­¥ï¼Œæˆ‘ä»¬å°±å¯ä»¥çŸ¥é“"),t("code",[s._v("moudle.hot.check")]),s._v("æ–¹æ³•æ˜¯å¦‚ä½•æ¥çš„å•¦ã€‚é‚£éƒ½åšäº†ä»€ä¹ˆï¼Ÿä¹‹åçš„æºç éƒ½æ˜¯"),t("code",[s._v("HotModuleReplacementPlugin")]),s._v("å¡å…¥åˆ°"),t("code",[s._v("bundle.js")]),s._v("ä¸­çš„å“¦ï¼Œæˆ‘å°±ä¸å†™æ–‡ä»¶è·¯å¾„äº†ã€‚")]),s._v(" "),t("ul",[t("li",[s._v("åˆ©ç”¨ä¸Šä¸€æ¬¡ä¿å­˜çš„"),t("code",[s._v("hash")]),s._v("å€¼ï¼Œè°ƒç”¨"),t("code",[s._v("hotDownloadManifest")]),s._v("å‘é€"),t("code",[s._v("xxx/hash.hot-update.json")]),s._v("çš„"),t("code",[s._v("ajax")]),s._v("è¯·æ±‚ï¼›")]),s._v(" "),t("li",[s._v("è¯·æ±‚ç»“æœè·å–çƒ­æ›´æ–°æ¨¡å—ï¼Œä»¥åŠä¸‹æ¬¡çƒ­æ›´æ–°çš„"),t("code",[s._v("Hash")]),s._v(" æ ‡è¯†ï¼Œå¹¶è¿›å…¥çƒ­æ›´æ–°å‡†å¤‡é˜¶æ®µã€‚")])]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[s._v("hotAvailableFilesMap "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" update"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("c"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// éœ€è¦æ›´æ–°çš„æ–‡ä»¶")]),s._v("\nhotUpdateNewHash "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" update"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("h"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// æ›´æ–°ä¸‹æ¬¡çƒ­æ›´æ–°hashå€¼")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("hotSetStatus")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"prepare"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// è¿›å…¥çƒ­æ›´æ–°å‡†å¤‡çŠ¶æ€")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("ul",[t("li",[s._v("è°ƒç”¨"),t("code",[s._v("hotDownloadUpdateChunk")]),s._v("å‘é€"),t("code",[s._v("xxx/hash.hot-update.js")]),s._v(" è¯·æ±‚ï¼Œé€šè¿‡"),t("code",[s._v("JSONP")]),s._v("æ–¹å¼ã€‚")])]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("hotDownloadUpdateChunk")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("chunkId")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),s._v(" script "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" document"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("createElement")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"script"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    script"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("charset "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"utf-8"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    script"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("src "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" __webpack_require__"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("p "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" chunkId "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"."')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" hotCurrentHash "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('".hot-update.js"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("null")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" script"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("crossOrigin "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("null")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    document"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("head"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("appendChild")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("script"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br")])]),t("p",[s._v("è¿™ä¸ªå‡½æ•°ä½“ä¸ºä»€ä¹ˆè¦å•ç‹¬æ‹¿å‡ºæ¥ï¼Œå› ä¸ºè¿™é‡Œè¦è§£é‡Šä¸‹ä¸ºä»€ä¹ˆä½¿ç”¨"),t("code",[s._v("JSONP")]),s._v("è·å–æœ€æ–°ä»£ç ï¼Ÿä¸»è¦æ˜¯å› ä¸º"),t("code",[s._v("JSONP")]),s._v("è·å–çš„ä»£ç å¯ä»¥ç›´æ¥æ‰§è¡Œã€‚ä¸ºä»€ä¹ˆè¦ç›´æ¥æ‰§è¡Œï¼Ÿæˆ‘ä»¬æ¥å›å¿†ä¸‹"),t("code",[s._v("/hash.hot-update.js")]),s._v("çš„ä»£ç æ ¼å¼æ˜¯æ€ä¹ˆæ ·çš„ã€‚")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2019/12/1/16ec04316d6ac5e3~tplv-t2oaga2asx-zoom-in-crop-mark:1304:0:0:0.awebp",alt:"img"}})]),s._v(" "),t("p",[s._v("å¯ä»¥å‘ç°ï¼Œæ–°ç¼–è¯‘åçš„ä»£ç æ˜¯åœ¨ä¸€ä¸ª"),t("code",[s._v("webpackHotUpdate")]),s._v("å‡½æ•°ä½“å†…éƒ¨çš„ã€‚ä¹Ÿå°±æ˜¯è¦ç«‹å³æ‰§è¡Œ"),t("code",[s._v("webpackHotUpdate")]),s._v("è¿™ä¸ªæ–¹æ³•ã€‚")]),s._v(" "),t("p",[s._v("å†çœ‹ä¸‹"),t("code",[s._v("webpackHotUpdate")]),s._v("è¿™ä¸ªæ–¹æ³•ã€‚")]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[s._v("window"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"webpackHotUpdate"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("chunkId"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" moreModules")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("hotAddUpdateChunk")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("chunkId"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" moreModules"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("ul",[t("li",[t("code",[s._v("hotAddUpdateChunk")]),s._v("æ–¹æ³•ä¼šæŠŠæ›´æ–°çš„æ¨¡å—"),t("code",[s._v("moreModules")]),s._v("èµ‹å€¼ç»™å…¨å±€å…¨é‡"),t("code",[s._v("hotUpdate")]),s._v("ã€‚")]),s._v(" "),t("li",[t("code",[s._v("hotUpdateDownloaded")]),s._v("æ–¹æ³•ä¼šè°ƒç”¨"),t("code",[s._v("hotApply")]),s._v("è¿›è¡Œä»£ç çš„æ›¿æ¢ã€‚")])]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("hotAddUpdateChunk")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("chunkId"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" moreModules")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// æ›´æ–°çš„æ¨¡å—moreModulesèµ‹å€¼ç»™å…¨å±€å…¨é‡hotUpdate")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),s._v(" moduleId "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" moreModules"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Object")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("prototype"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("hasOwnProperty")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("call")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("moreModules"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" moduleId"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\t    hotUpdate"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("moduleId"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" moreModules"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("moduleId"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// è°ƒç”¨hotApplyè¿›è¡Œæ¨¡å—çš„æ›¿æ¢")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("hotUpdateDownloaded")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br")])]),t("h4",{attrs:{id:"_8-hotapply-çƒ­æ›´æ–°æ¨¡å—æ›¿æ¢"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_8-hotapply-çƒ­æ›´æ–°æ¨¡å—æ›¿æ¢"}},[s._v("#")]),s._v(" 8. hotApply çƒ­æ›´æ–°æ¨¡å—æ›¿æ¢")]),s._v(" "),t("p",[s._v("çƒ­æ›´æ–°çš„æ ¸å¿ƒé€»è¾‘å°±åœ¨"),t("code",[s._v("hotApply")]),s._v("æ–¹æ³•äº†ã€‚ "),t("code",[s._v("hotApply")]),s._v("ä»£ç æœ‰å°†è¿‘ 400 è¡Œ")]),s._v(" "),t("h5",{attrs:{id:"_1åˆ é™¤è¿‡æœŸçš„æ¨¡å—-å°±æ˜¯éœ€è¦æ›¿æ¢çš„æ¨¡å—"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1åˆ é™¤è¿‡æœŸçš„æ¨¡å—-å°±æ˜¯éœ€è¦æ›¿æ¢çš„æ¨¡å—"}},[s._v("#")]),s._v(" â‘ åˆ é™¤è¿‡æœŸçš„æ¨¡å—ï¼Œå°±æ˜¯éœ€è¦æ›¿æ¢çš„æ¨¡å—")]),s._v(" "),t("p",[s._v("é€šè¿‡"),t("code",[s._v("hotUpdate")]),s._v("å¯ä»¥æ‰¾åˆ°æ—§æ¨¡å—")]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),s._v(" queue "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" outdatedModules"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("slice")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("while")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("queue"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("length "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    moduleId "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" queue"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("pop")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// ä»ç¼“å­˜ä¸­åˆ é™¤è¿‡æœŸçš„æ¨¡å—")]),s._v("\n    module "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" installedModules"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("moduleId"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// åˆ é™¤è¿‡æœŸçš„ä¾èµ–")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("delete")]),s._v(" outdatedDependencies"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("moduleId"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    \n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// å­˜å‚¨äº†è¢«åˆ æ‰çš„æ¨¡å—idï¼Œä¾¿äºæ›´æ–°ä»£ç ")]),s._v("\n    outdatedSelfAcceptedModules"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("push")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("module")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" moduleId\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br")])]),t("h5",{attrs:{id:"_2å°†æ–°çš„æ¨¡å—æ·»åŠ åˆ°-modules-ä¸­"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2å°†æ–°çš„æ¨¡å—æ·»åŠ åˆ°-modules-ä¸­"}},[s._v("#")]),s._v(" â‘¡å°†æ–°çš„æ¨¡å—æ·»åŠ åˆ° modules ä¸­")]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[s._v("appliedUpdate"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("moduleId"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" hotUpdate"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("moduleId"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("moduleId "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" appliedUpdate"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Object")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("prototype"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("hasOwnProperty")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("call")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("appliedUpdate"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" moduleId"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        modules"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("moduleId"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" appliedUpdate"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("moduleId"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])]),t("h5",{attrs:{id:"_3é€šè¿‡-webpack-require-æ‰§è¡Œç›¸å…³æ¨¡å—çš„ä»£ç "}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3é€šè¿‡-webpack-require-æ‰§è¡Œç›¸å…³æ¨¡å—çš„ä»£ç "}},[s._v("#")]),s._v(" â‘¢é€šè¿‡__webpack_require__æ‰§è¡Œç›¸å…³æ¨¡å—çš„ä»£ç ")]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("i "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" i "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v(" outdatedSelfAcceptedModules"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("length"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" i"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("++")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),s._v(" item "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" outdatedSelfAcceptedModules"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("i"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    moduleId "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" item"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("module"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("try")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// æ‰§è¡Œæœ€æ–°çš„ä»£ç ")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("__webpack_require__")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("moduleId"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("catch")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("err"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// ...å®¹é”™å¤„ç†")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br")])]),t("p",[t("code",[s._v("hotApply")]),s._v("çš„ç¡®æ¯”è¾ƒå¤æ‚ï¼ŒçŸ¥é“å¤§æ¦‚æµç¨‹å°±å¥½äº†ï¼Œè¿™ä¸€å°èŠ‚ï¼Œè¦æ±‚ä½ å¯¹webpackæ‰“åŒ…åçš„æ–‡ä»¶å¦‚ä½•æ‰§è¡Œçš„æœ‰ä¸€äº›äº†è§£ï¼Œå¤§å®¶å¯ä»¥è‡ªå»çœ‹ä¸‹ã€‚")]),s._v(" "),t("h4",{attrs:{id:"æ€»ç»“"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#æ€»ç»“"}},[s._v("#")]),s._v(" æ€»ç»“")]),s._v(" "),t("p",[s._v("è¿˜æ˜¯ä»¥é˜…è¯»æºç çš„å½¢å¼ç”»çš„å›¾ï¼Œâ‘ -â‘£çš„å°æ ‡è®°ï¼Œæ˜¯æ–‡ä»¶å‘ç”Ÿå˜åŒ–çš„ä¸€ä¸ªæµç¨‹ã€‚")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2019/12/1/16ec13499800dfce~tplv-t2oaga2asx-zoom-in-crop-mark:1304:0:0:0.awebp",alt:"img"}})]),s._v(" "),t("h4",{attrs:{id:"å¤§è‡´åŸç†æ¢³ç†"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#å¤§è‡´åŸç†æ¢³ç†"}},[s._v("#")]),s._v(" å¤§è‡´åŸç†æ¢³ç†")]),s._v(" "),t("ol",[t("li",[t("p",[s._v("å¯åŠ¨webpack ç”ŸæˆCompileå®ä¾‹ï¼Œcompilerä¸Šæœ‰å¾ˆå¤šæ–¹æ³•ï¼Œæ¯”å¦‚å¯ä»¥å¯åŠ¨webpackæ‰€æœ‰ç¼–è¯‘å·¥ä½œï¼Œä»¥åŠç›‘å¬æ–‡ä»¶çš„å˜åŒ–")])]),s._v(" "),t("li",[t("p",[s._v("ä½¿ç”¨expressæ­å»ºæœ¬åœ°server,è®©æµè§ˆå™¨è¯·æ±‚æœ¬åœ°èµ„æºã€‚serverå¯åŠ¨åï¼Œé€šè¿‡websocketï¼Œå»ºç«‹æµè§ˆå™¨å’Œæœ¬åœ°æœåŠ¡é—´çš„åŒå‘é€šä¿¡ï¼Œå¦‚æœæœ¬åœ°æ–‡ä»¶å‘ç”Ÿå˜æ›´ï¼Œéœ€è¦é€šçŸ¥æµè§ˆå™¨çƒ­æ›´æ–°ä»£ç ")])]),s._v(" "),t("li",[t("p",[s._v("webpackå¦‚ä½•çŸ¥é“æœ¬åœ°ä»£ç å‘ç”Ÿäº†ä¿®æ”¹ä»è€Œè§¦å‘webacké‡æ–°ç¼–è¯‘&websocketå¦‚ä½•çŸ¥é“webpackç¼–è¯‘ç»“æŸ&websocketå¦‚ä½•é€šçŸ¥æµè§ˆå™¨è¿›è¡Œçƒ­æ›´æ–°å‘¢ï¼Ÿ")]),s._v(" "),t("ol",[t("li",[t("p",[s._v("å¯åŠ¨æœ¬åœ°æœåŠ¡å‰ï¼Œè°ƒç”¨äº†"),t("code",[s._v("updateCompiler(this.compiler)")]),s._v("æ–¹æ³•ã€‚è¿™ä¸ªæ–¹æ³•ä¸­æœ‰ 2 æ®µå…³é”®æ€§ä»£ç ã€‚ä¸€ä¸ªæ˜¯è·å–"),t("code",[s._v("websocket")]),s._v("å®¢æˆ·ç«¯ä»£ç è·¯å¾„ï¼Œå¦ä¸€ä¸ªæ˜¯æ ¹æ®é…ç½®è·å–"),t("code",[s._v("webpack")]),s._v("çƒ­æ›´æ–°ä»£ç è·¯å¾„ã€‚")]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// è·å–websocketå®¢æˆ·ç«¯ä»£ç ")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" clientEntry "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token template-string"}},[t("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[s._v("`")]),t("span",{pre:!0,attrs:{class:"token interpolation"}},[t("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[s._v("${")]),s._v("require"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("resolve")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'../../client/'")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[s._v("}")])]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("?")]),t("span",{pre:!0,attrs:{class:"token interpolation"}},[t("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[s._v("${")]),s._v("domain"),t("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[s._v("}")])]),t("span",{pre:!0,attrs:{class:"token interpolation"}},[t("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[s._v("${")]),s._v("sockHost"),t("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[s._v("}")])]),t("span",{pre:!0,attrs:{class:"token interpolation"}},[t("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[s._v("${")]),s._v("sockPath"),t("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[s._v("}")])]),t("span",{pre:!0,attrs:{class:"token interpolation"}},[t("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[s._v("${")]),s._v("sockPort"),t("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[s._v("}")])]),t("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[s._v("`")])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// æ ¹æ®é…ç½®è·å–çƒ­æ›´æ–°ä»£ç ")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("let")]),s._v(" hotEntry"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("options"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("hotOnly"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    hotEntry "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" require"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("resolve")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'webpack/hot/only-dev-server'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("else")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("options"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("hot"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    hotEntry "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" require"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("resolve")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'webpack/hot/dev-server'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br")])])]),s._v(" "),t("li",[t("p",[s._v("ä¿®æ”¹webpack.config.jsçš„entryé…ç½®")]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// ä¿®æ”¹åçš„entryå…¥å£")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("entry")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("index")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" \n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// ä¸Šé¢è·å–çš„clientEntry")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'xxx/node_modules/webpack-dev-server/client/index.js?http://localhost:8080'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// å‚æ•°åé¢çš„jsonp è¯·æ±‚ä¼šç”¨åˆ°")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// ä¸Šé¢è·å–çš„hotEntry")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'xxx/node_modules/webpack/hot/dev-server.js'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// å¼€å‘é…ç½®çš„å…¥å£")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'./src/index.js'")]),s._v("\n    \t"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("      \n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br")])])]),s._v(" "),t("li",[t("p",[s._v("ç›‘å¬webpack ç¼–è¯‘ç»“æŸ")]),s._v(" "),t("p",[s._v("ä¿®æ”¹å¥½å…¥å£é…ç½®åï¼Œåˆè°ƒç”¨äº†"),t("code",[s._v("setupHooks")]),s._v("æ–¹æ³•ã€‚è¿™ä¸ªæ–¹æ³•æ˜¯ç”¨æ¥æ³¨å†Œç›‘å¬äº‹ä»¶çš„ï¼Œç›‘å¬æ¯æ¬¡"),t("code",[s._v("webpack")]),s._v("ç¼–è¯‘å®Œæˆã€‚")]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// node_modules/webpack-dev-server/lib/Server.js")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// ç»‘å®šç›‘å¬äº‹ä»¶")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("setupHooks")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("done"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" compiler"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("hooks"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// ç›‘å¬webpackçš„doneé’©å­ï¼Œtapableæä¾›çš„ç›‘å¬æ–¹æ³•")]),s._v("\n    done"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("tap")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'webpack-dev-server'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("stats")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("_sendStats")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("sockets"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getStats")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("stats"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("_stats "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" stats"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br")])]),t("p",[s._v("å½“ç›‘å¬åˆ°ä¸€æ¬¡"),t("code",[s._v("webpack")]),s._v("ç¼–è¯‘ç»“æŸï¼Œå°±ä¼šè°ƒç”¨"),t("code",[s._v("_sendStats")]),s._v("æ–¹æ³•é€šè¿‡"),t("code",[s._v("websocket")]),s._v("ç»™æµè§ˆå™¨å‘é€é€šçŸ¥ï¼Œ"),t("code",[s._v("ok")]),s._v("å’Œ"),t("code",[s._v("hash")]),s._v("äº‹ä»¶ï¼Œè¿™æ ·æµè§ˆå™¨å°±å¯ä»¥æ‹¿åˆ°æœ€æ–°çš„"),t("code",[s._v("hash")]),s._v("å€¼äº†ï¼Œåšæ£€æŸ¥æ›´æ–°é€»è¾‘ã€‚")])]),s._v(" "),t("li",[t("p",[s._v("webpackç›‘å¬æœ¬åœ°ä»£ç å˜åŒ–ï¼Œé€šè¿‡webpack-dev-middleware,ç”¨äºæœ¬åœ°æ–‡ä»¶çš„ç¼–è¯‘å’Œè¾“å‡ºä»¥åŠç›‘å¬")]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// node_modules/webpack-dev-middleware/index.js")]),s._v("\ncompiler"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("watch")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("options"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("watchOptions"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("err")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("err"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/*é”™è¯¯å¤„ç†*/")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// é€šè¿‡â€œmemory-fsâ€åº“å°†æ‰“åŒ…åçš„æ–‡ä»¶å†™å…¥å†…å­˜")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("setFs")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("context"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" compiler"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br")])])])])])]),s._v(" "),t("p",[s._v("â€‹\t\t\tä¸ºä»€ä¹ˆä»£ç çš„æ”¹åŠ¨ä¿å­˜ä¼šè‡ªåŠ¨ç¼–è¯‘ï¼Œé‡æ–°æ‰“åŒ…ï¼Ÿè¿™ä¸€ç³»åˆ—çš„é‡æ–°æ£€æµ‹ç¼–è¯‘å°±å½’åŠŸäº"),t("code",[s._v("compiler.watch")]),s._v("è¿™ä¸ªæ–¹æ³•äº†ã€‚ç›‘å¬æœ¬åœ°æ–‡ä»¶çš„å˜åŒ–ä¸»è¦æ˜¯é€šè¿‡"),t("strong",[s._v("æ–‡ä»¶çš„ç”Ÿæˆæ—¶é—´")]),s._v("æ˜¯å¦æœ‰å˜åŒ–ï¼Œè¿™é‡Œå°±ä¸ç»†è®²äº†ã€‚")]),s._v(" "),t("p",[s._v("â€‹\t\t\tæ‰§è¡Œ"),t("code",[s._v("setFs")]),s._v("æ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•ä¸»è¦ç›®çš„å°±æ˜¯å°†ç¼–è¯‘åçš„æ–‡ä»¶æ‰“åŒ…åˆ°å†…å­˜ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆåœ¨å¼€å‘çš„è¿‡ç¨‹ä¸­ï¼Œä½ ä¼šå‘ç°"),t("code",[s._v("dist")]),s._v("ç›®å½•æ²¡æœ‰æ‰“åŒ…åçš„ä»£ç ï¼Œå› ä¸ºéƒ½åœ¨å†…å­˜ä¸­ã€‚åŸå› å°±åœ¨äºè®¿é—®å†…å­˜ä¸­çš„ä»£ç æ¯”è®¿é—®æ–‡ä»¶ç³»ç»Ÿä¸­çš„æ–‡ä»¶æ›´å¿«ï¼Œè€Œä¸”ä¹Ÿå‡å°‘äº†ä»£ç å†™å…¥æ–‡ä»¶çš„å¼€é”€ï¼Œè¿™ä¸€åˆ‡éƒ½å½’åŠŸäº"),t("code",[s._v("memory-fs")]),s._v("ã€‚")]),s._v(" "),t("ol",{attrs:{start:"5"}},[t("li",[t("p",[s._v("ç°åœ¨æˆ‘åªåˆ°æ–‡ä»¶å‘ç”Ÿå˜åŒ–äº†ï¼Œè§¦å‘äº†webpacké‡æ–°ç¼–è¯‘ï¼Œé‚£ä¹ˆç¼–è¯‘å®Œæˆåï¼Œè°ƒç”¨ç¬¬ä¸‰æ­¥_sendStatsï¼Œé‚£ä¹ˆ__sendStatså¦‚ä½•å·¥ä½œçš„")]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// webpack-dev-server/client/index.js")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),s._v(" socket "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("require")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'./socket'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),s._v(" onSocketMessage "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token function-variable function"}},[s._v("hash")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("hash")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("_hash")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// æ›´æ–°currentHashå€¼")]),s._v("\n        status"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("currentHash "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" _hash"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token function-variable function"}},[s._v("ok")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ok")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sendMessage")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'Ok'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// è¿›è¡Œæ›´æ–°æ£€æŸ¥ç­‰æ“ä½œ")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("reloadApp")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("options"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" status"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// è¿æ¥æœåŠ¡åœ°å€socketUrlï¼Œ?http://localhost:8080ï¼Œæœ¬åœ°æœåŠ¡åœ°å€")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("socket")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("socketUrl"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" onSocketMessage"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("reloadApp")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\t"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("hot"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        log"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("info")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'[WDS] App hot update...'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        \n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// hotEmitterå…¶å®å°±æ˜¯EventEmitterçš„å®ä¾‹")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),s._v(" hotEmitter "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("require")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'webpack/hot/emitter'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        hotEmitter"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("emit")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'webpackHotUpdate'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" currentHash"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" \n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br")])]),t("p",[t("code",[s._v("socket")]),s._v("æ–¹æ³•å»ºç«‹äº†"),t("code",[s._v("websocket")]),s._v("å’ŒæœåŠ¡ç«¯çš„è¿æ¥ï¼Œå¹¶æ³¨å†Œäº† 2 ä¸ªç›‘å¬äº‹ä»¶ã€‚")]),s._v(" "),t("ul",[t("li",[t("code",[s._v("hash")]),s._v("äº‹ä»¶ï¼Œæ›´æ–°æœ€æ–°ä¸€æ¬¡æ‰“åŒ…åçš„"),t("code",[s._v("hash")]),s._v("å€¼ã€‚")]),s._v(" "),t("li",[t("code",[s._v("ok")]),s._v("äº‹ä»¶ï¼Œè¿›è¡Œçƒ­æ›´æ–°æ£€æŸ¥ã€‚")])]),s._v(" "),t("p",[s._v("çƒ­æ›´æ–°æ£€æŸ¥äº‹ä»¶æ˜¯è°ƒç”¨"),t("code",[s._v("reloadApp")]),s._v("æ–¹æ³•ã€‚æ¯”è¾ƒå¥‡æ€ªçš„æ˜¯ï¼Œè¿™ä¸ªæ–¹æ³•åˆåˆ©ç”¨"),t("code",[s._v("node.js")]),s._v("çš„"),t("code",[s._v("EventEmitter")]),s._v("ï¼Œå‘å‡º"),t("code",[s._v("webpackHotUpdate")]),s._v("æ¶ˆæ¯ã€‚è¿™æ˜¯ä¸ºä»€ä¹ˆï¼Ÿä¸ºä»€ä¹ˆä¸ç›´æ¥è¿›è¡Œæ£€æŸ¥æ›´æ–°å‘¢ï¼Ÿ")]),s._v(" "),t("p",[s._v("ä¸ªäººç†è§£å°±æ˜¯ä¸ºäº†æ›´å¥½çš„ç»´æŠ¤ä»£ç ï¼Œä»¥åŠèŒè´£åˆ’åˆ†çš„æ›´æ˜ç¡®ã€‚"),t("code",[s._v("websocket")]),s._v("ä»…ä»…ç”¨äºå®¢æˆ·ç«¯ï¼ˆæµè§ˆå™¨ï¼‰å’ŒæœåŠ¡ç«¯è¿›è¡Œé€šä¿¡ã€‚è€ŒçœŸæ­£åšäº‹æƒ…çš„æ´»è¿˜æ˜¯äº¤å›ç»™äº†"),t("code",[s._v("webpack")]),s._v("ã€‚")])]),s._v(" "),t("li",[t("p",[t("code",[s._v("webpack")]),s._v("ç›‘å¬åˆ°äº†"),t("code",[s._v("webpackHotUpdate")]),s._v("äº‹ä»¶ï¼Œå¹¶è·å–æœ€æ–°äº†æœ€æ–°çš„"),t("code",[s._v("hash")]),s._v("å€¼ï¼Œç„¶åç»ˆäºè¿›è¡Œæ£€æŸ¥æ›´æ–°äº†ã€‚æ£€æŸ¥æ›´æ–°å‘¢è°ƒç”¨çš„æ˜¯"),t("code",[s._v("module.hot.check")]),s._v("æ–¹æ³•ã€‚é‚£ä¹ˆé—®é¢˜åˆæ¥äº†ï¼Œ"),t("code",[s._v("module.hot.check")]),s._v("åˆæ˜¯å“ªé‡Œå†’å‡ºæ¥äº†çš„ï¼ç­”æ¡ˆæ˜¯"),t("code",[s._v("HotModuleReplacementPlugin")]),s._v("æå¾—é¬¼ã€‚è¿™é‡Œç•™ä¸ªç–‘é—®ï¼Œç»§ç»­å¾€ä¸‹çœ‹ã€‚")])]),s._v(" "),t("li",[t("p",[s._v("é€šè¿‡module.hot.checkè¿›è¡Œçƒ­æ›´æ–°")]),s._v(" "),t("ul",[t("li",[s._v("åˆ©ç”¨ä¸Šä¸€æ¬¡ä¿å­˜çš„"),t("code",[s._v("hash")]),s._v("å€¼ï¼Œè°ƒç”¨"),t("code",[s._v("hotDownloadManifest")]),s._v("å‘é€"),t("code",[s._v("xxx/hash.hot-update.json")]),s._v("çš„"),t("code",[s._v("ajax")]),s._v("è¯·æ±‚ï¼›")]),s._v(" "),t("li",[s._v("è¯·æ±‚ç»“æœè·å–çƒ­æ›´æ–°æ¨¡å—ï¼Œä»¥åŠä¸‹æ¬¡çƒ­æ›´æ–°çš„"),t("code",[s._v("Hash")]),s._v(" æ ‡è¯†ï¼Œå¹¶è¿›å…¥çƒ­æ›´æ–°å‡†å¤‡é˜¶æ®µã€‚")])]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[s._v("hotAvailableFilesMap "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" update"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("c"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// éœ€è¦æ›´æ–°çš„æ–‡ä»¶")]),s._v("\nhotUpdateNewHash "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" update"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("h"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// æ›´æ–°ä¸‹æ¬¡çƒ­æ›´æ–°hashå€¼")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("hotSetStatus")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"prepare"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// è¿›å…¥çƒ­æ›´æ–°å‡†å¤‡çŠ¶æ€")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("ul",[t("li",[s._v("è°ƒç”¨"),t("code",[s._v("hotDownloadUpdateChunk")]),s._v("å‘é€"),t("code",[s._v("xxx/hash.hot-update.js")]),s._v(" è¯·æ±‚ï¼Œé€šè¿‡"),t("code",[s._v("JSONP")]),s._v("æ–¹å¼ã€‚")])]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("hotDownloadUpdateChunk")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("chunkId")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),s._v(" script "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" document"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("createElement")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"script"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    script"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("charset "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"utf-8"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    script"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("src "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" __webpack_require__"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("p "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" chunkId "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"."')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" hotCurrentHash "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('".hot-update.js"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("null")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" script"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("crossOrigin "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("null")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    document"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("head"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("appendChild")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("script"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br")])])])]),s._v(" "),t("h2",{attrs:{id:"_5-tree-shaking-side-effects"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5-tree-shaking-side-effects"}},[s._v("#")]),s._v(" 5. tree-shaking&side-effects")]),s._v(" "),t("h3",{attrs:{id:"ä»€ä¹ˆæ˜¯treeshaking"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ä»€ä¹ˆæ˜¯treeshaking"}},[s._v("#")]),s._v(" ä»€ä¹ˆæ˜¯treeShakingï¼Ÿ")]),s._v(" "),t("ul",[t("li",[s._v("treeShaking æ˜¯ä¸€ä¸ªæœ¯è¯­ï¼Œé€šå¸¸ç”¨äºæè¿°ç§»é™¤ JavaScript ä¸Šä¸‹æ–‡ä¸­çš„æœªå¼•ç”¨ä»£ç (dead-code)ã€‚")])]),s._v(" "),t("h3",{attrs:{id:"treeshakingæœ‰ä»€ä¹ˆç”¨"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#treeshakingæœ‰ä»€ä¹ˆç”¨"}},[s._v("#")]),s._v(" treeShakingæœ‰ä»€ä¹ˆç”¨ï¼Ÿ")]),s._v(" "),t("ul",[t("li",[s._v("è‡³äºè¯´æœ‰ä»€ä¹ˆç”¨å‘¢ï¼Ÿå®ƒçš„ä½œç”¨å°±æ˜¯å°†ç¨‹åºä¸­æ²¡æœ‰ç”¨åˆ°çš„ä»£ç åœ¨æ‰“åŒ…ç¼–è¯‘çš„æ—¶å€™éƒ½åˆ é™¤æ‰ï¼Œè¿™æ ·èƒ½å‡å°‘æ‰“åŒ…ååŒ…çš„ä½“ç§¯å¤§å°ï¼Œå‡å°‘ç¨‹åºæ‰§è¡Œçš„æ—¶é•¿")])]),s._v(" "),t("h3",{attrs:{id:"å’Œä¼ ç»Ÿdce-dead-code-elimination-æœ‰ä»€ä¹ˆåŒºåˆ«"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#å’Œä¼ ç»Ÿdce-dead-code-elimination-æœ‰ä»€ä¹ˆåŒºåˆ«"}},[s._v("#")]),s._v(" å’Œä¼ ç»ŸDCEï¼ˆDead Code Eliminationï¼‰æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ")]),s._v(" "),t("ul",[t("li",[s._v("ä¼ ç»ŸDCEæ˜¯æ¶ˆé™¤ä¸å¯èƒ½æ‰§è¡Œçš„ä»£ç ï¼Œè€ŒtreeShakingè™½ç„¶ä¹Ÿæ˜¯DCEæ–°çš„å®ç°æ–¹å¼ï¼Œä½†æ˜¯å®ƒæ˜¯é€šè¿‡æ¶ˆé™¤æ²¡æœ‰ç”¨åˆ°çš„ä»£ç æ¥è¾¾åˆ°ç›®çš„")])]),s._v(" "),t("p",[t("strong",[s._v("Dead Codeçš„ç‰¹å¾ï¼š")])]),s._v(" "),t("ul",[t("li",[s._v("ä»£ç ä¸ä¼šè¢«æ‰§è¡Œï¼Œä¸å¯åˆ°è¾¾")]),s._v(" "),t("li",[s._v("ä»£ç æ‰§è¡Œçš„ç»“æœä¸ä¼šè¢«ç”¨åˆ°")]),s._v(" "),t("li",[s._v("ä»£ç åªä¼šå½±å“æ­»å˜é‡ï¼ˆåªå†™ä¸è¯»ï¼‰")])]),s._v(" "),t("h3",{attrs:{id:"åœ¨jsä¸­æ˜¯ä»€ä¹ˆåœ¨åšdce"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#åœ¨jsä¸­æ˜¯ä»€ä¹ˆåœ¨åšdce"}},[s._v("#")]),s._v(" åœ¨JSä¸­æ˜¯ä»€ä¹ˆåœ¨åšDCEï¼Ÿ")]),s._v(" "),t("p",[s._v("é¦–å…ˆè‚¯å®šä¸æ˜¯æµè§ˆå™¨åšDCEï¼Œå› ä¸ºå½“æˆ‘ä»¬çš„ä»£ç é€åˆ°æµè§ˆå™¨ï¼Œé‚£è¿˜è°ˆä»€ä¹ˆæ¶ˆé™¤æ— æ³•æ‰§è¡Œçš„ä»£ç æ¥ä¼˜åŒ–å‘¢ï¼Œæ‰€ä»¥è‚¯å®šæ˜¯é€åˆ°æµè§ˆå™¨ä¹‹å‰çš„æ­¥éª¤è¿›è¡Œä¼˜åŒ–ã€‚ä¼ ç»ŸDCEä½¿ç”¨åˆ°çš„æ˜¯ä»£ç å‹ç¼©ä¼˜åŒ–å·¥å…·uglifyæ¥å®Œæˆçš„ï¼›è€ŒtreeShakingåˆ™æ˜¯é€šè¿‡webpackæ¥å®Œæˆçš„ï¼›")]),s._v(" "),t("h3",{attrs:{id:"ä»€ä¹ˆæ˜¯sideeffects"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ä»€ä¹ˆæ˜¯sideeffects"}},[s._v("#")]),s._v(" ä»€ä¹ˆæ˜¯sideEffectsï¼Ÿ")]),s._v(" "),t("p",[s._v("å…¶ä¸»è¦åŠŸèƒ½æ˜¯è®© webpack å»é™¤ treeShaking å¸¦æ¥å‰¯ä½œç”¨çš„ä»£ç ã€‚æ€ä¹ˆå»ç†è§£è¿™ä¸ªå‰¯ä½œç”¨å‘¢ï¼Ÿå‰¯ä½œç”¨å¯ä»¥ç†è§£æˆæŸä¸ªæ¨¡å—æ‰§è¡Œæ—¶é™¤äº†å¯¼å‡ºæˆå‘˜ä¹‹å¤–æ‰€ä½œçš„äº‹æƒ…ï¼Œæ¯”å¦‚æˆ‘ä»¬ä¿®æ”¹äº†windowä¸Šçš„å±æ€§ï¼Œæˆ–è€…æä¾›æŸä¸ªpolyfillï¼›å¦‚æœæ²¡æœ‰è¿™äº›å‰¯ä½œç”¨çš„è¯é‚£ä¹ˆwebpackå°±ä¼šæ¸…é™¤æ²¡æœ‰ç”¨çš„ä»£ç ï¼Œä¹Ÿå°±æ˜¯ä¸Šé¢è¯´çš„treeShakingã€‚")]),s._v(" "),t("h3",{attrs:{id:"sideeffectså†™æ³•"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#sideeffectså†™æ³•"}},[s._v("#")]),s._v(" sideEffectså†™æ³•ï¼Ÿ")]),s._v(" "),t("ul",[t("li",[s._v("true/falseï¼Œfalse ä¸ºäº†å‘Šè¯‰ "),t("code",[s._v("webpack")]),s._v(" æ‰€æœ‰æ–‡ä»¶ä»£ç éƒ½æ˜¯æ²¡æœ‰å‰¯ä½œç”¨çš„")]),s._v(" "),t("li",[s._v("æ•°ç»„ï¼Œæ•°ç»„åˆ™è¡¨ç¤ºå‘Šè¯‰ "),t("code",[s._v("webpack")]),s._v(" æŒ‡å®šæ–‡ä»¶ä»£ç æ˜¯æ²¡æœ‰å‰¯ä½œç”¨çš„")])]),s._v(" "),t("p",[s._v("æ —å­å¦‚ä¸‹ï¼š")]),s._v(" "),t("p",[t("code",[s._v("tree shaking")]),s._v(" å‰")]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// webpack.config.js")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" HtmlWebpackPlugin "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("require")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'html-webpack-plugin'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\nmodule"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("exports "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("mode")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'development'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("devtool")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'inline-source-map'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\n  "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("plugins")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("HtmlWebpackPlugin")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br")])]),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// src/math.js")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("export")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function-variable function"}},[s._v("add")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("x"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" y")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v(" x "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" y"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("export")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function-variable function"}},[s._v("subtract")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("x"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" y")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v(" x "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" y"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// src/index.js")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" add "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'./math'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\nconsole"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("p",[s._v("ä»ä¸Šé¢çœ‹åˆ°ï¼Œæˆ‘ä»¬å¼•ç”¨å¹¶ä½¿ç”¨äº†"),t("code",[s._v("math.add")]),s._v(" å‡½æ•°ï¼Œæ²¡æœ‰ä½¿ç”¨ "),t("code",[s._v("math.subtract")]),s._v("å‡½æ•°")]),s._v(" "),t("p",[s._v("æ‰§è¡Œ "),t("code",[s._v("npx webpack")]),s._v(" å¯ä»¥çœ‹åˆ°ï¼Œæ‰“åŒ…ç»“æœä¸­ "),t("code",[s._v("math")]),s._v("æ¨¡å—çš„ä¸¤ä¸ªå‡½æ•°éƒ½è¢«æ‰“åŒ…äº†")]),s._v(" "),t("p",[t("code",[s._v("tree shaking")]),s._v(" å")]),s._v(" "),t("div",{staticClass:"language-javascript line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-javascript"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// webpack.config.js")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" HtmlWebpackPlugin "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("require")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'html-webpack-plugin'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\nmodule"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("exports "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("mode")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'development'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("devtool")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'inline-source-map'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\n  "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("plugins")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("HtmlWebpackPlugin")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\n  "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("optimization")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// ä½¿ç”¨ ES module æ–¹å¼å¼•ç”¨çš„æ¨¡å—å°†è¢« tree shaking ä¼˜åŒ–")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("usedExports")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br")])]),t("p",[s._v("æ‰§è¡Œ "),t("code",[s._v("npx webpack")]),s._v(" å¯ä»¥çœ‹åˆ°ï¼Œåªæœ‰ å·²ç»ä½¿ç”¨çš„ "),t("code",[s._v("add")]),s._v("å‡½æ•°è¢«æš´éœ²å‡ºå»")]),s._v(" "),t("p",[s._v("åœ¨ç”Ÿäº§ç¯å¢ƒçœ‹ä»¥ä¸‹æ•ˆæœ")]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// webpack.config.js")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" HtmlWebpackPlugin "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("require")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'html-webpack-plugin'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\nmodule"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("exports "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("mode")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'production'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\n  "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("plugins")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("HtmlWebpackPlugin")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\n  "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("optimization")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("usedExports")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br")])]),t("p",[s._v("æ‰§è¡Œ "),t("code",[s._v("npx webpack")]),s._v("å¯ä»¥çœ‹åˆ°ï¼Œåªæœ‰å·²ç»ä½¿ç”¨çš„ "),t("code",[s._v("add")]),s._v("å‡½æ•°çš„æ‰§è¡Œç»“æœï¼Œ"),t("code",[s._v("subtract")]),s._v(" å‡½æ•°å°±æ˜¯æ‰€è°“çš„â€œæœªå¼•ç”¨ä»£ç ("),t("code",[s._v("dead code")]),s._v(")â€ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œåº”è¯¥åˆ é™¤æ‰æœªè¢«å¼•ç”¨çš„"),t("code",[s._v("export")]),s._v("ã€‚å¹¶ä¸”ä»£ç å·²ç»è¢« "),t("code",[s._v("webpack")]),s._v("ä¼˜åŒ–ç²¾ç®€äº†")]),s._v(" "),t("p",[s._v("å¯ä»¥å¾—å‡ºç»“è®ºï¼Œ"),t("code",[s._v("tree shaking")]),s._v(" ä¼šå°†é€šè¿‡ä½¿ç”¨ "),t("code",[s._v("ES module")]),s._v(" æ–¹å¼å¼•ç”¨çš„æ¨¡å—ä¸­æœªä½¿ç”¨çš„ä»£ç åˆ é™¤æ‰")]),s._v(" "),t("p",[t("code",[s._v("tree shaking")]),s._v(" ä¸¤ä¸ªå…³é”®è¯ï¼š1. ä½¿ç”¨ "),t("code",[s._v("ES module")]),s._v(" æ–¹å¼å¼•ç”¨æ¨¡å—ï¼› 2. æœªä½¿ç”¨çš„ä»£ç ")]),s._v(" "),t("p",[s._v("ç»§ç»­éªŒè¯")]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// src/index.js")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" add"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" subtract "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'./math'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\nconsole"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("p",[s._v("ä»ä¸Šé¢çœ‹åˆ°ï¼Œæˆ‘ä»¬å¼•ç”¨äº†"),t("code",[s._v("add")]),s._v(", ``subtract"),t("code",[s._v("ä½†åªä½¿ç”¨äº†")]),s._v("math.add "),t("code",[s._v("å‡½æ•°ï¼Œæ²¡æœ‰ä½¿ç”¨")]),s._v("math.subtract` å‡½æ•°")]),s._v(" "),t("p",[s._v("æ‰§è¡Œ "),t("code",[s._v("npx webpack")]),s._v(" å¯ä»¥çœ‹åˆ°ï¼Œæ‰“åŒ…ç»“æœä¸­ä¾æ—§åªæœ‰ "),t("code",[s._v("add")]),s._v(" å‡½æ•°è¢«æ‰“åŒ…äº†ï¼Œæœªä½¿ç”¨è¿‡çš„ "),t("code",[s._v("subtract")]),s._v(" å‡½æ•°è¢«åˆ é™¤äº†")]),s._v(" "),t("p",[t("code",[s._v("sideEffects")]),s._v("\næ³¨æ„ "),t("code",[s._v("Webpack")]),s._v(" ä¸èƒ½ç™¾åˆ†ç™¾å®‰å…¨åœ°è¿›è¡Œ "),t("code",[s._v("tree-shaking")]),s._v("ã€‚æœ‰äº›æ¨¡å—å¯¼å…¥ï¼Œåªè¦è¢«å¼•å…¥ï¼Œå°±ä¼šå¯¹åº”ç”¨ç¨‹åºäº§ç”Ÿé‡è¦çš„å½±å“ã€‚ä¸€ä¸ªå¾ˆå¥½çš„ä¾‹å­å°±")]),s._v(" "),t("p",[s._v("æ˜¯ å…¨å±€æ ·å¼æ–‡ä»¶ï¼Œæˆ–è€… å…¨å±€JS æ–‡ä»¶ã€‚")]),s._v(" "),t("div",{staticClass:"language-css line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-css"}},[t("code",[t("span",{pre:!0,attrs:{class:"token selector"}},[s._v("src/style.css\n\nbody")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v("background-color")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" chocolate"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("div",{staticClass:"language-javascript line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-javascript"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// src/todo.global.js")]),s._v("\n\nconsole"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'TODO'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("div",{staticClass:"language-javascript line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-javascript"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// src/index.js")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" _ "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'lodash'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" add"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" subtract "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'./math'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'./todo.global'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'./style.css'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\nconsole"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br")])]),t("div",{staticClass:"language-javascript line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-javascript"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// webpack.config.js")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" HtmlWebpackPlugin "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("require")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'html-webpack-plugin'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\nmodule"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("exports "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("mode")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'production'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\n  "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("plugins")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("HtmlWebpackPlugin")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\n  "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("module")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("rules")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("test")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token regex"}},[t("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[s._v("/")]),t("span",{pre:!0,attrs:{class:"token regex-source language-regex"}},[s._v("\\.css$")]),t("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[s._v("/")])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("use")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n          "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'style-loader'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n          "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'css-loader'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\n  "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("optimization")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("usedExports")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br")])]),t("p",[s._v("æ‰§è¡Œ"),t("code",[s._v("npx webpack serve")]),s._v("ï¼Œä½ ä¼šå‘ç° "),t("code",[s._v("style.css")]),s._v("ã€"),t("code",[s._v("todo.global.js")]),s._v("éƒ½ç”Ÿæ•ˆäº†ï¼Œè¿™æ˜¯å› ä¸ºè¿™ä¸¤ä¸ªæ–‡ä»¶ä¸æ˜¯ä½¿ç”¨çš„ "),t("code",[s._v("ESmodules")]),s._v(" æ–¹å¼å°†æ¨¡å—å¯¼å‡ºï¼ˆexportï¼‰çš„ã€‚")]),s._v(" "),t("p",[t("code",[s._v("Webpack")]),s._v(" è®¤ä¸ºè¿™æ ·çš„æ–‡ä»¶æœ‰â€œå‰¯ä½œç”¨â€ã€‚å…·æœ‰å‰¯ä½œç”¨çš„æ–‡ä»¶ä¸åº”è¯¥åš"),t("code",[s._v("tree-shaking")]),s._v("ï¼Œå› ä¸ºè¿™å°†ç ´åæ•´ä¸ªåº”ç”¨ç¨‹åºã€‚")]),s._v(" "),t("p",[t("code",[s._v("Webpack")]),s._v(" çš„è®¾è®¡è€…æ¸…æ¥šåœ°è®¤è¯†åˆ°ä¸çŸ¥é“å“ªäº›æ–‡ä»¶æœ‰å‰¯ä½œç”¨çš„æƒ…å†µä¸‹æ‰“åŒ…ä»£ç çš„é£é™©ï¼Œå› æ­¤"),t("code",[s._v("webpack")]),s._v("é»˜è®¤åœ°å°†æ‰€æœ‰ä»£ç è§†ä¸ºæœ‰å‰¯ä½œç”¨ã€‚")]),s._v(" "),t("p",[s._v("è¿™å¯ä»¥ä¿æŠ¤ä½ å…äºåˆ é™¤å¿…è¦çš„æ–‡ä»¶ï¼Œä½†è¿™æ„å‘³ç€ "),t("code",[s._v("Webpack")]),s._v(" çš„é»˜è®¤è¡Œä¸ºå®é™…ä¸Šæ˜¯ä¸è¿›è¡Œ "),t("code",[s._v("tree-shaking")]),s._v("ã€‚å€¼å¾—æ³¨æ„çš„æ˜¯"),t("code",[s._v("webpack 5")]),s._v("é»˜è®¤ä¼šè¿›è¡Œ tree-shakingã€‚")]),s._v(" "),t("p",[s._v("å¦‚ä½•å‘Šè¯‰ "),t("code",[s._v("Webpack")]),s._v(" ä½ çš„ä»£ç æ— å‰¯ä½œç”¨ï¼Œå¯ä»¥é€šè¿‡"),t("code",[s._v("package.json")]),s._v(" æœ‰ä¸€ä¸ªç‰¹æ®Šçš„å±æ€§ "),t("code",[s._v("sideEffects")]),s._v("ï¼Œå°±æ˜¯ä¸ºæ­¤è€Œå­˜åœ¨çš„ã€‚")]),s._v(" "),t("p",[t("strong",[s._v("sideEffects")]),s._v("æœ‰ä¸‰ä¸ªå¯èƒ½çš„å€¼ï¼š")]),s._v(" "),t("p",[s._v("trueï¼šï¼ˆé»˜è®¤å€¼ï¼‰è¿™æ„å‘³ç€æ‰€æœ‰çš„æ–‡ä»¶éƒ½æœ‰å‰¯ä½œç”¨ï¼Œä¹Ÿå°±æ˜¯æ²¡æœ‰ä¸€ä¸ªæ–‡ä»¶å¯ä»¥ "),t("code",[s._v("tree-shaking")]),s._v("ã€‚")]),s._v(" "),t("p",[s._v("falseï¼šå‘Šè¯‰ "),t("code",[s._v("Webpack")]),s._v(" æ²¡æœ‰æ–‡ä»¶æœ‰å‰¯ä½œç”¨ï¼Œæ‰€æœ‰æ–‡ä»¶éƒ½å¯ä»¥ "),t("code",[s._v("tree-shaking")]),s._v("ã€‚")]),s._v(" "),t("p",[s._v("æ•°ç»„ï¼šæ˜¯æ–‡ä»¶è·¯å¾„æ•°ç»„ã€‚å®ƒå‘Šè¯‰ "),t("code",[s._v("webpack")]),s._v("ï¼Œé™¤äº†æ•°ç»„ä¸­åŒ…å«çš„æ–‡ä»¶å¤–ï¼Œä½ çš„ä»»ä½•æ–‡ä»¶éƒ½æ²¡æœ‰å‰¯ä½œç”¨ã€‚å› æ­¤ï¼Œé™¤äº†æŒ‡å®šçš„æ–‡ä»¶ä¹‹å¤–ï¼Œå…¶ä»–æ–‡ä»¶éƒ½å¯ä»¥å®‰å…¨åœ°è¿›è¡Œ tree-shakingã€‚")]),s._v(" "),t("p",[s._v("ğŸ’¡: é€šè¿‡ "),t("code",[s._v("/*#__PURE__*/")]),s._v(" æ³¨é‡Šæ¥å¸®å¿™ terserã€‚å®ƒç»™ä¸€ä¸ªè¯­å¥æ ‡è®°ä¸ºæ²¡æœ‰å‰¯ä½œç”¨ã€‚å°±è¿™æ ·ä¸€ä¸ªç®€å•çš„æ”¹å˜å°±èƒ½å¤Ÿä½¿ä¸‹é¢çš„ä»£ç è¢« tree-shake:")]),s._v(" "),t("div",{staticClass:"language-javascript line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-javascript"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),s._v(" Button$1 "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/*#__PURE__*/")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("withAppProvider")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("Button"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h4",{attrs:{id:"webpack5-å¯¹æ¯”webpack4-tree-shakingçš„åŒºåˆ«"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#webpack5-å¯¹æ¯”webpack4-tree-shakingçš„åŒºåˆ«"}},[s._v("#")]),s._v(" webpack5 å¯¹æ¯”webpack4 tree shakingçš„åŒºåˆ«")]),s._v(" "),t("blockquote",[t("p",[s._v("webpack4 æ›¾ç»ä¸è¿›è¡Œå¯¹ CommonJs å¯¼å‡ºå’Œ require() è°ƒç”¨æ—¶çš„å¯¼å‡ºä½¿ç”¨åˆ†æã€‚webpack 5 å¢åŠ äº†å¯¹ä¸€äº› CommonJs æ„é€ çš„æ”¯æŒï¼Œå…è®¸æ¶ˆé™¤æœªä½¿ç”¨çš„ CommonJs å¯¼å‡ºï¼Œå¹¶ä» require() è°ƒç”¨ä¸­è·Ÿè¸ªå¼•ç”¨çš„å¯¼å‡ºåç§°ã€‚æ‰€ä»¥webpack5çš„tree shaking æ›´åŠ å…¨é¢")])])])}),[],!1,null,null,null);t.default=e.exports}}]);